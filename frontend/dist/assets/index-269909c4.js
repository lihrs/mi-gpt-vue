import{_ as Et,a as je,b as Ot,c as ne,d as Le,e as se,f as kt,g as Rt,h as xe,i as Oe,j as $t,k as de,l as F,m as ke,n as re,o as ee,s as ce,p as we,q as Re,r as fe}from"./card-abaf16bd.js";import{r as ze,a as De,g as _e,b as At,c as Ht,d as It,e as Pt,f as Nt,h as Mt,i as Wt,j as Ft,k as jt,l as Lt,m as Kt,o as zt,p as Dt,q as _t,s as Bt,t as Ut,n as Vt}from"./index-6c979d7c.js";var Be={exports:{}};(function(y){y.exports=function(n){var a={};function f(b){if(a[b])return a[b].exports;var $=a[b]={i:b,l:!1,exports:{}};return n[b].call($.exports,$,$.exports,f),$.l=!0,$.exports}return f.m=n,f.c=a,f.d=function(b,$,L){f.o(b,$)||Object.defineProperty(b,$,{enumerable:!0,get:L})},f.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},f.t=function(b,$){if($&1&&(b=f(b)),$&8||$&4&&typeof b=="object"&&b&&b.__esModule)return b;var L=Object.create(null);if(f.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:b}),$&2&&typeof b!="string")for(var V in b)f.d(L,V,(function(X){return b[X]}).bind(null,V));return L},f.n=function(b){var $=b&&b.__esModule?function(){return b.default}:function(){return b};return f.d($,"a",$),$},f.o=function(b,$){return Object.prototype.hasOwnProperty.call(b,$)},f.p="/dist/",f(f.s=136)}({136:function(n,a,f){f.r(a);var b=f(3),$={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},L={selection:{renderHeader:function(m,S){var E=S.store;return m("el-checkbox",{attrs:{disabled:E.states.data&&E.states.data.length===0,indeterminate:E.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},on:{input:this.toggleAllSelection}})},renderCell:function(m,S){var E=S.row,H=S.column,O=S.isSelected,P=S.store,Y=S.$index;return m("el-checkbox",{nativeOn:{click:function(p){return p.stopPropagation()}},attrs:{value:O,disabled:H.selectable?!H.selectable.call(null,E,Y):!1},on:{input:function(){P.commit("rowSelectedChanged",E)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(m,S){var E=S.column;return E.label||"#"},renderCell:function(m,S){var E=S.$index,H=S.column,O=E+1,P=H.index;return typeof P=="number"?O=E+P:typeof P=="function"&&(O=P(E)),m("div",[O])},sortable:!1},expand:{renderHeader:function(m,S){var E=S.column;return E.label||""},renderCell:function(m,S){var E=S.row,H=S.store,O=S.isExpanded,P=["el-table__expand-icon"];O&&P.push("el-table__expand-icon--expanded");var Y=function(p){p.stopPropagation(),H.toggleRowExpansion(E)};return m("div",{class:P,on:{click:Y}},[m("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function V(I,m){var S=m.row,E=m.column,H=m.$index,O=E.property,P=O&&Object(b.getPropByPath)(S,O).v;return E&&E.formatter?E.formatter(S,E,P,H):P}function X(I,m){var S=m.row,E=m.treeNode,H=m.store;if(!E)return null;var O=[],P=function(g){g.stopPropagation(),H.loadOrToggle(S)};if(E.indent&&O.push(I("span",{class:"el-table__indent",style:{"padding-left":E.indent+"px"}})),typeof E.expanded=="boolean"&&!E.noLazyChildren){var Y=["el-table__expand-icon",E.expanded?"el-table__expand-icon--expanded":""],c=["el-icon-arrow-right"];E.loading&&(c=["el-icon-loading"]),O.push(I("div",{class:Y,on:{click:P}},[I("i",{class:c})]))}else O.push(I("span",{class:"el-table__placeholder"}));return O}var G=f(8),u=f(18),N=f.n(u),_=Object.assign||function(I){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(I[E]=S[E])}return I},B=1,Q={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(m){return m.every(function(S){return["ascending","descending",null].indexOf(S)>-1})}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){for(var m=this.$parent;m&&!m.tableId;)m=m.$parent;return m},columnOrTableParent:function(){for(var m=this.$parent;m&&!m.tableId&&!m.columnId;)m=m.$parent;return m},realWidth:function(){return Object(G.m)(this.width)},realMinWidth:function(){return Object(G.l)(this.minWidth)},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var m=this,S=arguments.length,E=Array(S),H=0;H<S;H++)E[H]=arguments[H];return E.reduce(function(O,P){return Array.isArray(P)&&P.forEach(function(Y){O[Y]=m[Y]}),O},{})},getColumnElIndex:function(m,S){return[].indexOf.call(m,S)},setColumnWidth:function(m){return this.realWidth&&(m.width=this.realWidth),this.realMinWidth&&(m.minWidth=this.realMinWidth),m.minWidth||(m.minWidth=80),m.realWidth=m.width===void 0?m.minWidth:m.width,m},setColumnForcedProps:function(m){var S=m.type,E=L[S]||{};return Object.keys(E).forEach(function(H){var O=E[H];O!==void 0&&(m[H]=H==="className"?m[H]+" "+O:O)}),m},setColumnRenders:function(m){var S=this;this.$createElement,this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):m.type!=="selection"&&(m.renderHeader=function(H,O){var P=S.$scopedSlots.header;return P?P(O):m.label});var E=m.renderCell;return m.type==="expand"?(m.renderCell=function(H,O){return H("div",{class:"cell"},[E(H,O)])},this.owner.renderExpanded=function(H,O){return S.$scopedSlots.default?S.$scopedSlots.default(O):S.$slots.default}):(E=E||V,m.renderCell=function(H,O){var P=null;S.$scopedSlots.default?P=S.$scopedSlots.default(O):P=E(H,O);var Y=X(H,O),c={class:"cell",style:{}};return m.showOverflowTooltip&&(c.class+=" el-tooltip",c.style={width:(O.column.realWidth||O.column.width)-1+"px"}),H("div",c,[Y,P])}),m},registerNormalWatchers:function(){var m=this,S=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],E={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},H=S.reduce(function(O,P){return O[P]=P,O},E);Object.keys(H).forEach(function(O){var P=E[O];m.$watch(O,function(Y){m.columnConfig[P]=Y})})},registerComplexWatchers:function(){var m=this,S=["fixed"],E={realWidth:"width",realMinWidth:"minWidth"},H=S.reduce(function(O,P){return O[P]=P,O},E);Object.keys(H).forEach(function(O){var P=E[O];m.$watch(O,function(Y){m.columnConfig[P]=Y;var c=P==="fixed";m.owner.store.scheduleLayout(c)})})}},components:{ElCheckbox:N.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var m=this.columnOrTableParent;this.isSubColumn=this.owner!==m,this.columnId=(m.tableId||m.columnId)+"_column_"+B++;var S=this.type||"default",E=this.sortable===""?!0:this.sortable,H=_({},$[S],{id:this.columnId,type:S,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:E,index:this.index}),O=["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],P=["sortMethod","sortBy","sortOrders"],Y=["selectable","reserveSelection"],c=["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"],p=this.getPropsData(O,P,Y,c);p=Object(G.h)(H,p);var g=Object(G.a)(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps);p=g(p),this.columnConfig=p,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var m=this.owner,S=this.columnOrTableParent,E=this.isSubColumn?S.$el.children:S.$refs.hiddenColumns.children,H=this.getColumnElIndex(E,this.$el);m.store.commit("insertColumn",this.columnConfig,H,this.isSubColumn?S.columnConfig:null)},destroyed:function(){if(this.$parent){var m=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?m.columnConfig:null)}},render:function(m){return m("div",this.$slots.default)}};Q.install=function(I){I.component(Q.name,Q)},a.default=Q},18:function(n,a){n.exports=ze()},3:function(n,a){n.exports=De()},8:function(n,a,f){f.d(a,"b",function(){return L}),f.d(a,"j",function(){return X}),f.d(a,"d",function(){return G}),f.d(a,"e",function(){return u}),f.d(a,"c",function(){return N}),f.d(a,"g",function(){return _}),f.d(a,"f",function(){return B}),f.d(a,"h",function(){return I}),f.d(a,"m",function(){return m}),f.d(a,"l",function(){return S}),f.d(a,"k",function(){return E}),f.d(a,"a",function(){return H}),f.d(a,"n",function(){return O}),f.d(a,"o",function(){return P}),f.d(a,"i",function(){return Y});var b=f(3),$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},L=function(p){for(var g=p.target;g&&g.tagName.toUpperCase()!=="HTML";){if(g.tagName.toUpperCase()==="TD")return g;g=g.parentNode}return null},V=function(p){return p!==null&&(typeof p>"u"?"undefined":$(p))==="object"},X=function(p,g,v,T,R){if(!g&&!T&&(!R||Array.isArray(R)&&!R.length))return p;typeof v=="string"?v=v==="descending"?-1:1:v=v&&v<0?-1:1;var W=T?null:function(A,M){return R?(Array.isArray(R)||(R=[R]),R.map(function(z){return typeof z=="string"?Object(b.getValueByPath)(A,z):z(A,M,p)})):(g!=="$key"&&V(A)&&"$value"in A&&(A=A.$value),[V(A)?Object(b.getValueByPath)(A,g):A])},K=function(M,z){if(T)return T(M.value,z.value);for(var q=0,pe=M.key.length;q<pe;q++){if(M.key[q]<z.key[q])return-1;if(M.key[q]>z.key[q])return 1}return 0};return p.map(function(A,M){return{value:A,index:M,key:W?W(A,M):null}}).sort(function(A,M){var z=K(A,M);return z||(z=A.index-M.index),z*v}).map(function(A){return A.value})},G=function(p,g){var v=null;return p.columns.forEach(function(T){T.id===g&&(v=T)}),v},u=function(p,g){for(var v=null,T=0;T<p.columns.length;T++){var R=p.columns[T];if(R.columnKey===g){v=R;break}}return v},N=function(p,g){var v=(g.className||"").match(/el-table_[^\s]+/gm);return v?G(p,v[0]):null},_=function(p,g){if(!p)throw new Error("row is required when get row identity");if(typeof g=="string"){if(g.indexOf(".")<0)return p[g];for(var v=g.split("."),T=p,R=0;R<v.length;R++)T=T[v[R]];return T}else if(typeof g=="function")return g.call(null,p)},B=function(p,g){var v={};return(p||[]).forEach(function(T,R){v[_(T,g)]={row:T,index:R}}),v};function Q(c,p){return Object.prototype.hasOwnProperty.call(c,p)}function I(c,p){var g={},v=void 0;for(v in c)g[v]=c[v];for(v in p)if(Q(p,v)){var T=p[v];typeof T<"u"&&(g[v]=T)}return g}function m(c){return c!==void 0&&(c=parseInt(c,10),isNaN(c)&&(c=null)),c}function S(c){return typeof c<"u"&&(c=m(c),isNaN(c)&&(c=80)),c}function E(c){return typeof c=="number"?c:typeof c=="string"?/^\d+(?:px)?$/.test(c)?parseInt(c,10):c:null}function H(){for(var c=arguments.length,p=Array(c),g=0;g<c;g++)p[g]=arguments[g];return p.length===0?function(v){return v}:p.length===1?p[0]:p.reduce(function(v,T){return function(){return v(T.apply(void 0,arguments))}})}function O(c,p,g){var v=!1,T=c.indexOf(p),R=T!==-1,W=function(){c.push(p),v=!0},K=function(){c.splice(T,1),v=!0};return typeof g=="boolean"?g&&!R?W():!g&&R&&K():R?K():W(),v}function P(c,p){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"hasChildren",T=function(K){return!(Array.isArray(K)&&K.length)};function R(W,K,A){p(W,K,A),K.forEach(function(M){if(M[v]){p(M,null,A+1);return}var z=M[g];T(z)||R(M,z,A+1)})}c.forEach(function(W){if(W[v]){p(W,null,0);return}var K=W[g];T(K)||R(W,K,0)})}var Y=function(p,g){var v=Object.getOwnPropertyNames(p),T=Object.getOwnPropertyNames(g);if(v.length!==T.length)return!1;for(var R=0;R<v.length;R++){var W=v[R];if(p[W]!==g[W])return!1}return!0}}})})(Be);var Gt=Be.exports;const Ke=_e(Gt);var Ue={exports:{}};(function(y){y.exports=function(n){var a={};function f(b){if(a[b])return a[b].exports;var $=a[b]={i:b,l:!1,exports:{}};return n[b].call($.exports,$,$.exports,f),$.l=!0,$.exports}return f.m=n,f.c=a,f.d=function(b,$,L){f.o(b,$)||Object.defineProperty(b,$,{enumerable:!0,get:L})},f.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},f.t=function(b,$){if($&1&&(b=f(b)),$&8||$&4&&typeof b=="object"&&b&&b.__esModule)return b;var L=Object.create(null);if(f.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:b}),$&2&&typeof b!="string")for(var V in b)f.d(L,V,(function(X){return b[X]}).bind(null,V));return L},f.n=function(b){var $=b&&b.__esModule?function(){return b.default}:function(){return b};return f.d($,"a",$),$},f.o=function(b,$){return Object.prototype.hasOwnProperty.call(b,$)},f.p="/dist/",f(f.s=58)}([function(n,a,f){f.d(a,"a",function(){return b});function b($,L,V,X,G,u,N,_){var B=typeof $=="function"?$.options:$;L&&(B.render=L,B.staticRenderFns=V,B._compiled=!0),X&&(B.functional=!0),u&&(B._scopeId="data-v-"+u);var Q;if(N?(Q=function(S){S=S||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!S&&typeof __VUE_SSR_CONTEXT__<"u"&&(S=__VUE_SSR_CONTEXT__),G&&G.call(this,S),S&&S._registeredComponents&&S._registeredComponents.add(N)},B._ssrRegister=Q):G&&(Q=_?function(){G.call(this,this.$root.$options.shadowRoot)}:G),Q)if(B.functional){B._injectStyles=Q;var I=B.render;B.render=function(E,H){return Q.call(H),I(E,H)}}else{var m=B.beforeCreate;B.beforeCreate=m?[].concat(m,Q):[Q]}return{exports:$,options:B}}},,function(n,a){n.exports=At()},function(n,a){n.exports=De()},,function(n,a){n.exports=Ht()},function(n,a){n.exports=It()},function(n,a){n.exports=Pt},function(n,a,f){f.d(a,"b",function(){return L}),f.d(a,"j",function(){return X}),f.d(a,"d",function(){return G}),f.d(a,"e",function(){return u}),f.d(a,"c",function(){return N}),f.d(a,"g",function(){return _}),f.d(a,"f",function(){return B}),f.d(a,"h",function(){return I}),f.d(a,"m",function(){return m}),f.d(a,"l",function(){return S}),f.d(a,"k",function(){return E}),f.d(a,"a",function(){return H}),f.d(a,"n",function(){return O}),f.d(a,"o",function(){return P}),f.d(a,"i",function(){return Y});var b=f(3),$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},L=function(p){for(var g=p.target;g&&g.tagName.toUpperCase()!=="HTML";){if(g.tagName.toUpperCase()==="TD")return g;g=g.parentNode}return null},V=function(p){return p!==null&&(typeof p>"u"?"undefined":$(p))==="object"},X=function(p,g,v,T,R){if(!g&&!T&&(!R||Array.isArray(R)&&!R.length))return p;typeof v=="string"?v=v==="descending"?-1:1:v=v&&v<0?-1:1;var W=T?null:function(A,M){return R?(Array.isArray(R)||(R=[R]),R.map(function(z){return typeof z=="string"?Object(b.getValueByPath)(A,z):z(A,M,p)})):(g!=="$key"&&V(A)&&"$value"in A&&(A=A.$value),[V(A)?Object(b.getValueByPath)(A,g):A])},K=function(M,z){if(T)return T(M.value,z.value);for(var q=0,pe=M.key.length;q<pe;q++){if(M.key[q]<z.key[q])return-1;if(M.key[q]>z.key[q])return 1}return 0};return p.map(function(A,M){return{value:A,index:M,key:W?W(A,M):null}}).sort(function(A,M){var z=K(A,M);return z||(z=A.index-M.index),z*v}).map(function(A){return A.value})},G=function(p,g){var v=null;return p.columns.forEach(function(T){T.id===g&&(v=T)}),v},u=function(p,g){for(var v=null,T=0;T<p.columns.length;T++){var R=p.columns[T];if(R.columnKey===g){v=R;break}}return v},N=function(p,g){var v=(g.className||"").match(/el-table_[^\s]+/gm);return v?G(p,v[0]):null},_=function(p,g){if(!p)throw new Error("row is required when get row identity");if(typeof g=="string"){if(g.indexOf(".")<0)return p[g];for(var v=g.split("."),T=p,R=0;R<v.length;R++)T=T[v[R]];return T}else if(typeof g=="function")return g.call(null,p)},B=function(p,g){var v={};return(p||[]).forEach(function(T,R){v[_(T,g)]={row:T,index:R}}),v};function Q(c,p){return Object.prototype.hasOwnProperty.call(c,p)}function I(c,p){var g={},v=void 0;for(v in c)g[v]=c[v];for(v in p)if(Q(p,v)){var T=p[v];typeof T<"u"&&(g[v]=T)}return g}function m(c){return c!==void 0&&(c=parseInt(c,10),isNaN(c)&&(c=null)),c}function S(c){return typeof c<"u"&&(c=m(c),isNaN(c)&&(c=80)),c}function E(c){return typeof c=="number"?c:typeof c=="string"?/^\d+(?:px)?$/.test(c)?parseInt(c,10):c:null}function H(){for(var c=arguments.length,p=Array(c),g=0;g<c;g++)p[g]=arguments[g];return p.length===0?function(v){return v}:p.length===1?p[0]:p.reduce(function(v,T){return function(){return v(T.apply(void 0,arguments))}})}function O(c,p,g){var v=!1,T=c.indexOf(p),R=T!==-1,W=function(){c.push(p),v=!0},K=function(){c.splice(T,1),v=!0};return typeof g=="boolean"?g&&!R?W():!g&&R&&K():R?K():W(),v}function P(c,p){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"children",v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"hasChildren",T=function(K){return!(Array.isArray(K)&&K.length)};function R(W,K,A){p(W,K,A),K.forEach(function(M){if(M[v]){p(M,null,A+1);return}var z=M[g];T(z)||R(M,z,A+1)})}c.forEach(function(W){if(W[v]){p(W,null,0);return}var K=W[g];T(K)||R(W,K,0)})}var Y=function(p,g){var v=Object.getOwnPropertyNames(p),T=Object.getOwnPropertyNames(g);if(v.length!==T.length)return!1;for(var R=0;R<v.length;R++){var W=v[R];if(p[W]!==g[W])return!1}return!0}},function(n,a){n.exports=Nt()},,function(n,a){n.exports=Mt()},function(n,a){n.exports=Wt()},function(n,a){n.exports=Ft()},,function(n,a){n.exports=jt()},function(n,a){n.exports=Lt()},,function(n,a){n.exports=ze()},function(n,a){n.exports=Kt()},,,,,,,,,,function(n,a){n.exports=zt()},,,,,,,,,,function(n,a){n.exports=Dt()},function(n,a){n.exports=_t()},,,,function(n,a){n.exports=Bt()},,,function(n,a){n.exports=Ut()},,,,,,,,,,,function(n,a,f){f.r(a);var b=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"el-table",class:[{"el-table--fit":r.fit,"el-table--striped":r.stripe,"el-table--border":r.border||r.isGroup,"el-table--hidden":r.isHidden,"el-table--group":r.isGroup,"el-table--fluid-height":r.maxHeight,"el-table--scrollable-x":r.layout.scrollX,"el-table--scrollable-y":r.layout.scrollY,"el-table--enable-row-hover":!r.store.states.isComplex,"el-table--enable-row-transition":(r.store.states.data||[]).length!==0&&(r.store.states.data||[]).length<100},r.tableSize?"el-table--"+r.tableSize:""],on:{mouseleave:function(i){r.handleMouseLeave(i)}}},[t("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[r._t("default")],2),r.showHeader?t("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:r.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[t("table-header",{ref:"tableHeader",style:{width:r.layout.bodyWidth?r.layout.bodyWidth+"px":""},attrs:{store:r.store,border:r.border,"default-sort":r.defaultSort}})],1):r._e(),t("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[r.layout.scrollX?"is-scrolling-"+r.scrollPosition:"is-scrolling-none"],style:[r.bodyHeight]},[t("table-body",{style:{width:r.bodyWidth},attrs:{context:r.context,store:r.store,stripe:r.stripe,"row-class-name":r.rowClassName,"row-style":r.rowStyle,highlight:r.highlightCurrentRow}}),!r.data||r.data.length===0?t("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:r.emptyBlockStyle},[t("span",{staticClass:"el-table__empty-text"},[r._t("empty",[r._v(r._s(r.emptyText||r.t("el.table.emptyText")))])],2)]):r._e(),r.$slots.append?t("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[r._t("append")],2):r._e()],1),r.showSummary?t("div",{directives:[{name:"show",rawName:"v-show",value:r.data&&r.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:r.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[t("table-footer",{style:{width:r.layout.bodyWidth?r.layout.bodyWidth+"px":""},attrs:{store:r.store,border:r.border,"sum-text":r.sumText||r.t("el.table.sumText"),"summary-method":r.summaryMethod,"default-sort":r.defaultSort}})],1):r._e(),r.fixedColumns.length>0?t("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:r.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:r.layout.fixedWidth?r.layout.fixedWidth+"px":""},r.fixedHeight]},[r.showHeader?t("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[t("table-header",{ref:"fixedTableHeader",style:{width:r.bodyWidth},attrs:{fixed:"left",border:r.border,store:r.store}})],1):r._e(),t("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:r.layout.headerHeight+"px"},r.fixedBodyHeight]},[t("table-body",{style:{width:r.bodyWidth},attrs:{fixed:"left",store:r.store,stripe:r.stripe,highlight:r.highlightCurrentRow,"row-class-name":r.rowClassName,"row-style":r.rowStyle}}),r.$slots.append?t("div",{staticClass:"el-table__append-gutter",style:{height:r.layout.appendHeight+"px"}}):r._e()],1),r.showSummary?t("div",{directives:[{name:"show",rawName:"v-show",value:r.data&&r.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[t("table-footer",{style:{width:r.bodyWidth},attrs:{fixed:"left",border:r.border,"sum-text":r.sumText||r.t("el.table.sumText"),"summary-method":r.summaryMethod,store:r.store}})],1):r._e()]):r._e(),r.rightFixedColumns.length>0?t("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:r.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:r.layout.rightFixedWidth?r.layout.rightFixedWidth+"px":"",right:r.layout.scrollY?(r.border?r.layout.gutterWidth:r.layout.gutterWidth||0)+"px":""},r.fixedHeight]},[r.showHeader?t("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[t("table-header",{ref:"rightFixedTableHeader",style:{width:r.bodyWidth},attrs:{fixed:"right",border:r.border,store:r.store}})],1):r._e(),t("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:r.layout.headerHeight+"px"},r.fixedBodyHeight]},[t("table-body",{style:{width:r.bodyWidth},attrs:{fixed:"right",store:r.store,stripe:r.stripe,"row-class-name":r.rowClassName,"row-style":r.rowStyle,highlight:r.highlightCurrentRow}}),r.$slots.append?t("div",{staticClass:"el-table__append-gutter",style:{height:r.layout.appendHeight+"px"}}):r._e()],1),r.showSummary?t("div",{directives:[{name:"show",rawName:"v-show",value:r.data&&r.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[t("table-footer",{style:{width:r.bodyWidth},attrs:{fixed:"right",border:r.border,"sum-text":r.sumText||r.t("el.table.sumText"),"summary-method":r.summaryMethod,store:r.store}})],1):r._e()]):r._e(),r.rightFixedColumns.length>0?t("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:r.layout.scrollY?r.layout.gutterWidth+"px":"0",height:r.layout.headerHeight+"px"}}):r._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:r.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])},$=[];b._withStripped=!0;var L=f(18),V=f.n(L),X=f(44),G=f(16),u=f(47),N=f.n(u),_=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,B=function(e,t){e&&e.addEventListener&&e.addEventListener(_?"DOMMouseScroll":"mousewheel",function(i){var s=N()(i);t&&t.apply(this,[i,s])})},Q={bind:function(e,t){B(e,t.value)}},I=f(6),m=f.n(I),S=f(11),E=f.n(S),H=f(7),O=f.n(H),P=f(9),Y=f.n(P),c=f(8),p={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var e=this.states,t=e.data,i=t===void 0?[]:t,s=e.rowKey,l=e.defaultExpandAll,o=e.expandRows;if(l)this.states.expandRows=i.slice();else if(s){var d=Object(c.f)(o,s);this.states.expandRows=i.reduce(function(h,w){var C=Object(c.g)(w,s),k=d[C];return k&&h.push(w),h},[])}else this.states.expandRows=[]},toggleRowExpansion:function(e,t){var i=Object(c.n)(this.states.expandRows,e,t);i&&(this.table.$emit("expand-change",e,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(e){this.assertRowKey();var t=this.states,i=t.data,s=t.rowKey,l=Object(c.f)(i,s);this.states.expandRows=e.reduce(function(o,d){var h=l[d];return h&&o.push(h.row),o},[])},isRowExpanded:function(e){var t=this.states,i=t.expandRows,s=i===void 0?[]:i,l=t.rowKey;if(l){var o=Object(c.f)(s,l);return!!o[Object(c.g)(e,l)]}return s.indexOf(e)!==-1}}},g=f(3),v={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(e){this.assertRowKey(),this.states._currentRowKey=e,this.setCurrentRowByKey(e)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(e){var t=this.states,i=t.data,s=i===void 0?[]:i,l=t.rowKey,o=null;l&&(o=Object(g.arrayFind)(s,function(d){return Object(c.g)(d,l)===e})),t.currentRow=o},updateCurrentRow:function(e){var t=this.states,i=this.table,s=t.currentRow;if(e&&e!==s){t.currentRow=e,i.$emit("current-change",e,s);return}!e&&s&&(t.currentRow=null,i.$emit("current-change",null,s))},updateCurrentRowData:function(){var e=this.states,t=this.table,i=e.rowKey,s=e._currentRowKey,l=e.data||[],o=e.currentRow;if(l.indexOf(o)===-1&&o){if(i){var d=Object(c.g)(o,i);this.setCurrentRowByKey(d)}else e.currentRow=null;e.currentRow===null&&t.$emit("current-change",null,o)}else s&&(this.setCurrentRowByKey(s),this.restoreCurrentRowKey())}}},T=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},R={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var e=this.states.data||[];return this.normalize(e)},normalizedLazyNode:function(){var e=this.states,t=e.rowKey,i=e.lazyTreeNodeMap,s=e.lazyColumnIdentifier,l=Object.keys(i),o={};return l.length&&l.forEach(function(d){if(i[d].length){var h={children:[]};i[d].forEach(function(w){var C=Object(c.g)(w,t);h.children.push(C),w[s]&&!o[C]&&(o[C]={children:[]})}),o[d]=h}}),o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(e){var t=this.states,i=t.childrenColumnName,s=t.lazyColumnIdentifier,l=t.rowKey,o=t.lazy,d={};return Object(c.o)(e,function(h,w,C){var k=Object(c.g)(h,l);Array.isArray(w)?d[k]={children:w.map(function(U){return Object(c.g)(U,l)}),level:C}:o&&(d[k]={children:[],lazy:!0,level:C})},i,s),d},updateTreeData:function(){var e=this.normalizedData,t=this.normalizedLazyNode,i=Object.keys(e),s={};if(i.length){var l=this.states,o=l.treeData,d=l.defaultExpandAll,h=l.expandRowKeys,w=l.lazy,C=[],k=function(J,D){var x=d||h&&h.indexOf(D)!==-1;return!!(J&&J.expanded||x)};i.forEach(function(j){var J=o[j],D=T({},e[j]);if(D.expanded=k(J,j),D.lazy){var x=J||{},Z=x.loaded,te=Z===void 0?!1:Z,ae=x.loading,le=ae===void 0?!1:ae;D.loaded=!!te,D.loading=!!le,C.push(j)}s[j]=D});var U=Object.keys(t);w&&U.length&&C.length&&U.forEach(function(j){var J=o[j],D=t[j].children;if(C.indexOf(j)!==-1){if(s[j].children.length!==0)throw new Error("[ElTable]children must be an empty array.");s[j].children=D}else{var x=J||{},Z=x.loaded,te=Z===void 0?!1:Z,ae=x.loading,le=ae===void 0?!1:ae;s[j]={lazy:!0,loaded:!!te,loading:!!le,expanded:k(J,j),children:D,level:""}}})}this.states.treeData=s,this.updateTableScrollY()},updateTreeExpandKeys:function(e){this.states.expandRowKeys=e,this.updateTreeData()},toggleTreeExpansion:function(e,t){this.assertRowKey();var i=this.states,s=i.rowKey,l=i.treeData,o=Object(c.g)(e,s),d=o&&l[o];if(o&&d&&"expanded"in d){var h=d.expanded;t=typeof t>"u"?!d.expanded:t,l[o].expanded=t,h!==t&&this.table.$emit("expand-change",e,t),this.updateTableScrollY()}},loadOrToggle:function(e){this.assertRowKey();var t=this.states,i=t.lazy,s=t.treeData,l=t.rowKey,o=Object(c.g)(e,l),d=s[o];i&&d&&"loaded"in d&&!d.loaded?this.loadData(e,o,d):this.toggleTreeExpansion(e)},loadData:function(e,t,i){var s=this,l=this.table.load,o=this.states.treeData;l&&!o[t].loaded&&(o[t].loading=!0,l(e,i,function(d){if(!Array.isArray(d))throw new Error("[ElTable] data must be an array");var h=s.states,w=h.lazyTreeNodeMap,C=h.treeData;C[t].loading=!1,C[t].loaded=!0,C[t].expanded=!0,d.length&&s.$set(w,t,d),s.table.$emit("expand-change",e,!0)}))}}},W=function(e,t){var i=t.sortingColumn;return!i||typeof i.sortable=="string"?e:Object(c.j)(e,t.sortProp,t.sortOrder,i.sortMethod,i.sortBy)},K=function r(e){var t=[];return e.forEach(function(i){i.children?t.push.apply(t,r(i.children)):t.push(i)}),t},A=O.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[p,v,R],methods:{assertRowKey:function(){var e=this.states.rowKey;if(!e)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var e=this.states,t=e._columns||[];e.fixedColumns=t.filter(function(d){return d.fixed===!0||d.fixed==="left"}),e.rightFixedColumns=t.filter(function(d){return d.fixed==="right"}),e.fixedColumns.length>0&&t[0]&&t[0].type==="selection"&&!t[0].fixed&&(t[0].fixed=!0,e.fixedColumns.unshift(t[0]));var i=t.filter(function(d){return!d.fixed});e.originColumns=[].concat(e.fixedColumns).concat(i).concat(e.rightFixedColumns);var s=K(i),l=K(e.fixedColumns),o=K(e.rightFixedColumns);e.leafColumnsLength=s.length,e.fixedLeafColumnsLength=l.length,e.rightFixedLeafColumnsLength=o.length,e.columns=[].concat(l).concat(s).concat(o),e.isComplex=e.fixedColumns.length>0||e.rightFixedColumns.length>0},scheduleLayout:function(e){e&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(e){var t=this.states.selection,i=t===void 0?[]:t;return i.indexOf(e)>-1},clearSelection:function(){var e=this.states;e.isAllSelected=!1;var t=e.selection;t.length&&(e.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var e=this.states,t=e.data,i=e.rowKey,s=e.selection,l=void 0;if(i){l=[];var o=Object(c.f)(s,i),d=Object(c.f)(t,i);for(var h in o)o.hasOwnProperty(h)&&!d[h]&&l.push(o[h].row)}else l=s.filter(function(C){return t.indexOf(C)===-1});if(l.length){var w=s.filter(function(C){return l.indexOf(C)===-1});e.selection=w,this.table.$emit("selection-change",w.slice())}},toggleRowSelection:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Object(c.n)(this.states.selection,e,t);if(s){var l=(this.states.selection||[]).slice();i&&this.table.$emit("select",l,e),this.table.$emit("selection-change",l)}},_toggleAllSelection:function(){var e=this.states,t=e.data,i=t===void 0?[]:t,s=e.selection,l=e.selectOnIndeterminate?!e.isAllSelected:!(e.isAllSelected||s.length);e.isAllSelected=l;var o=!1;i.forEach(function(d,h){e.selectable?e.selectable.call(null,d,h)&&Object(c.n)(s,d,l)&&(o=!0):Object(c.n)(s,d,l)&&(o=!0)}),o&&this.table.$emit("selection-change",s?s.slice():[]),this.table.$emit("select-all",s)},updateSelectionByRowKey:function(){var e=this.states,t=e.selection,i=e.rowKey,s=e.data,l=Object(c.f)(t,i);s.forEach(function(o){var d=Object(c.g)(o,i),h=l[d];h&&(t[h.index]=o)})},updateAllSelected:function(){var e=this.states,t=e.selection,i=e.rowKey,s=e.selectable,l=e.data||[];if(l.length===0){e.isAllSelected=!1;return}var o=void 0;i&&(o=Object(c.f)(t,i));for(var d=function(D){return o?!!o[Object(c.g)(D,i)]:t.indexOf(D)!==-1},h=!0,w=0,C=0,k=l.length;C<k;C++){var U=l[C],j=s&&s.call(null,U,C);if(d(U))w++;else if(!s||j){h=!1;break}}w===0&&(h=!1),e.isAllSelected=h},updateFilters:function(e,t){Array.isArray(e)||(e=[e]);var i=this.states,s={};return e.forEach(function(l){i.filters[l.id]=t,s[l.columnKey||l.id]=t}),s},updateSort:function(e,t,i){this.states.sortingColumn&&this.states.sortingColumn!==e&&(this.states.sortingColumn.order=null),this.states.sortingColumn=e,this.states.sortProp=t,this.states.sortOrder=i},execFilter:function(){var e=this,t=this.states,i=t._data,s=t.filters,l=i;Object.keys(s).forEach(function(o){var d=t.filters[o];if(!(!d||d.length===0)){var h=Object(c.d)(e.states,o);h&&h.filterMethod&&(l=l.filter(function(w){return d.some(function(C){return h.filterMethod.call(null,C,w,h)})}))}}),t.filteredData=l},execSort:function(){var e=this.states;e.data=W(e.filteredData,e)},execQuery:function(e){e&&e.filter||this.execFilter(),this.execSort()},clearFilter:function(e){var t=this.states,i=this.table.$refs,s=i.tableHeader,l=i.fixedTableHeader,o=i.rightFixedTableHeader,d={};s&&(d=Y()(d,s.filterPanels)),l&&(d=Y()(d,l.filterPanels)),o&&(d=Y()(d,o.filterPanels));var h=Object.keys(d);if(h.length)if(typeof e=="string"&&(e=[e]),Array.isArray(e)){var w=e.map(function(C){return Object(c.e)(t,C)});h.forEach(function(C){var k=w.find(function(U){return U.id===C});k&&(d[C].filteredValue=[])}),this.commit("filterChange",{column:w,values:[],silent:!0,multi:!0})}else h.forEach(function(C){d[C].filteredValue=[]}),t.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){var e=this.states;e.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(e){this.setExpandRowKeys(e),this.updateTreeExpandKeys(e)},toggleRowExpansionAdapter:function(e,t){var i=this.states.columns.some(function(s){var l=s.type;return l==="expand"});i?this.toggleRowExpansion(e,t):this.toggleTreeExpansion(e,t)}}});A.prototype.mutations={setData:function(e,t){var i=e._data!==t;e._data=t,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),e.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):i?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(e,t,i,s){var l=e._columns;s&&(l=s.children,l||(l=s.children=[])),typeof i<"u"?l.splice(i,0,t):l.push(t),t.type==="selection"&&(e.selectable=t.selectable,e.reserveSelection=t.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(e,t,i){var s=e._columns;i&&(s=i.children,s||(s=i.children=[])),s&&s.splice(s.indexOf(t),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(e,t){var i=t.prop,s=t.order,l=t.init;if(i){var o=Object(g.arrayFind)(e.columns,function(d){return d.property===i});o&&(o.order=s,this.updateSort(o,i,s),this.commit("changeSortCondition",{init:l}))}},changeSortCondition:function(e,t){var i=e.sortingColumn,s=e.sortProp,l=e.sortOrder;l===null&&(e.sortingColumn=null,e.sortProp=null);var o={filter:!0};this.execQuery(o),(!t||!(t.silent||t.init))&&this.table.$emit("sort-change",{column:i,prop:s,order:l}),this.updateTableScrollY()},filterChange:function(e,t){var i=t.column,s=t.values,l=t.silent,o=this.updateFilters(i,s);this.execQuery(),l||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(e,t){this.toggleRowSelection(t),this.updateAllSelected()},setHoverRow:function(e,t){e.hoverRow=t},setCurrentRow:function(e,t){this.updateCurrentRow(t)}},A.prototype.commit=function(r){var e=this.mutations;if(e[r]){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];e[r].apply(this,[this.states].concat(i))}else throw new Error("Action not found: "+r)},A.prototype.updateTableScrollY=function(){O.a.nextTick(this.table.updateScrollY)};var M=A,z=f(19),q=f.n(z);function pe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r)throw new Error("Table is required.");var t=new M;return t.table=r,t.toggleAllSelection=q()(10,t._toggleAllSelection),Object.keys(e).forEach(function(i){t.states[i]=e[i]}),t}function me(r){var e={};return Object.keys(r).forEach(function(t){var i=r[t],s=void 0;typeof i=="string"?s=function(){return this.store.states[i]}:typeof i=="function"?s=function(){return i.call(this,this.store.states)}:console.error("invalid value type"),s&&(e[t]=s)}),e}var Ve=f(39),Ge=f.n(Ve);function Ye(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var Je=function(){function r(e){Ye(this,r),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=Ge()();for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return r.prototype.updateScrollY=function(){var t=this.height;if(t===null)return!1;var i=this.table.bodyWrapper;if(this.table.$el&&i){var s=i.querySelector(".el-table__body"),l=this.scrollY,o=s.offsetHeight>this.bodyHeight;return this.scrollY=o,l!==o}return!1},r.prototype.setHeight=function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"height";if(!O.a.prototype.$isServer){var l=this.table.$el;if(t=Object(c.k)(t),this.height=t,!l&&(t||t===0))return O.a.nextTick(function(){return i.setHeight(t,s)});typeof t=="number"?(l.style[s]=t+"px",this.updateElsHeight()):typeof t=="string"&&(l.style[s]=t,this.updateElsHeight())}},r.prototype.setMaxHeight=function(t){this.setHeight(t,"max-height")},r.prototype.getFlattenColumns=function(){var t=[],i=this.table.columns;return i.forEach(function(s){s.isColumnGroup?t.push.apply(t,s.columns):t.push(s)}),t},r.prototype.updateElsHeight=function(){var t=this;if(!this.table.$ready)return O.a.nextTick(function(){return t.updateElsHeight()});var i=this.table.$refs,s=i.headerWrapper,l=i.appendWrapper,o=i.footerWrapper;if(this.appendHeight=l?l.offsetHeight:0,!(this.showHeader&&!s)){var d=s?s.querySelector(".el-table__header tr"):null,h=this.headerDisplayNone(d),w=this.headerHeight=this.showHeader?s.offsetHeight:0;if(this.showHeader&&!h&&s.offsetWidth>0&&(this.table.columns||[]).length>0&&w<2)return O.a.nextTick(function(){return t.updateElsHeight()});var C=this.tableHeight=this.table.$el.clientHeight,k=this.footerHeight=o?o.offsetHeight:0;this.height!==null&&(this.bodyHeight=C-w-k+(o?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var U=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?C-(U?0:this.gutterWidth):C,this.updateScrollY(),this.notifyObservers("scrollable")}},r.prototype.headerDisplayNone=function(t){if(!t)return!0;for(var i=t;i.tagName!=="DIV";){if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1},r.prototype.updateColumnsWidth=function(){if(!O.a.prototype.$isServer){var t=this.fit,i=this.table.$el.clientWidth,s=0,l=this.getFlattenColumns(),o=l.filter(function(x){return typeof x.width!="number"});if(l.forEach(function(x){typeof x.width=="number"&&x.realWidth&&(x.realWidth=null)}),o.length>0&&t){l.forEach(function(x){s+=x.width||x.minWidth||80});var d=this.scrollY?this.gutterWidth:0;if(s<=i-d){this.scrollX=!1;var h=i-d-s;if(o.length===1)o[0].realWidth=(o[0].minWidth||80)+h;else{var w=o.reduce(function(x,Z){return x+(Z.minWidth||80)},0),C=h/w,k=0;o.forEach(function(x,Z){if(Z!==0){var te=Math.floor((x.minWidth||80)*C);k+=te,x.realWidth=(x.minWidth||80)+te}}),o[0].realWidth=(o[0].minWidth||80)+h-k}}else this.scrollX=!0,o.forEach(function(x){x.realWidth=x.minWidth});this.bodyWidth=Math.max(s,i),this.table.resizeState.width=this.bodyWidth}else l.forEach(function(x){!x.width&&!x.minWidth?x.realWidth=80:x.realWidth=x.width||x.minWidth,s+=x.realWidth}),this.scrollX=s>i,this.bodyWidth=s;var U=this.store.states.fixedColumns;if(U.length>0){var j=0;U.forEach(function(x){j+=x.realWidth||x.width}),this.fixedWidth=j}var J=this.store.states.rightFixedColumns;if(J.length>0){var D=0;J.forEach(function(x){D+=x.realWidth||x.width}),this.rightFixedWidth=D}this.notifyObservers("columns")}},r.prototype.addObserver=function(t){this.observers.push(t)},r.prototype.removeObserver=function(t){var i=this.observers.indexOf(t);i!==-1&&this.observers.splice(i,1)},r.prototype.notifyObservers=function(t){var i=this,s=this.observers;s.forEach(function(l){switch(t){case"columns":l.onColumnsChange(i);break;case"scrollable":l.onScrollableChange(i);break;default:throw new Error("Table Layout don't have event "+t+".")}})},r}(),Xe=Je,ie=f(2),Qe=f(29),Ze=f.n(Qe),Te={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var e=this.layout;if(!e&&this.table&&(e=this.table.layout),!e)throw new Error("Can not find table layout.");return e}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(e){var t=this.$el.querySelectorAll("colgroup > col");if(t.length){var i=e.getFlattenColumns(),s={};i.forEach(function(C){s[C.id]=C});for(var l=0,o=t.length;l<o;l++){var d=t[l],h=d.getAttribute("name"),w=s[h];w&&d.setAttribute("width",w.realWidth||w.width)}}},onScrollableChange:function(e){for(var t=this.$el.querySelectorAll("colgroup > col[name=gutter]"),i=0,s=t.length;i<s;i++){var l=t[i];l.setAttribute("width",e.scrollY?e.gutterWidth:"0")}for(var o=this.$el.querySelectorAll("th.gutter"),d=0,h=o.length;d<h;d++){var w=o[d];w.style.width=e.scrollY?e.gutterWidth+"px":"0",w.style.display=e.scrollY?"":"none"}}}},qe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$e={name:"ElTableRow",props:["columns","row","index","isSelected","isExpanded","store","context","firstDefaultColumnIndex","treeRowData","treeIndent","columnsHidden","getSpan","getColspanRealWidth","getCellStyle","getCellClass","handleCellMouseLeave","handleCellMouseEnter","fixed"],components:{ElCheckbox:V.a},render:function(){var e=this,t=arguments[0],i=this.columns,s=this.row,l=this.index,o=this.store,d=this.context,h=this.firstDefaultColumnIndex,w=this.treeRowData,C=this.treeIndent,k=this.columnsHidden,U=k===void 0?[]:k,j=this.isSelected,J=this.isExpanded;return t("tr",[i.map(function(D,x){var Z=e.getSpan(s,D,l,x),te=Z.rowspan,ae=Z.colspan;if(!te||!ae)return null;var le=qe({},D);le.realWidth=e.getColspanRealWidth(i,ae,x);var oe={store:o,isSelected:j,isExpanded:J,_self:d,column:le,row:s,$index:l};return x===h&&w&&(oe.treeNode={indent:w.level*C,level:w.level},typeof w.expanded=="boolean"&&(oe.treeNode.expanded=w.expanded,"loading"in w&&(oe.treeNode.loading=w.loading),"noLazyChildren"in w&&(oe.treeNode.noLazyChildren=w.noLazyChildren))),t("td",{style:e.getCellStyle(l,x,s,D),class:e.getCellClass(l,x,s,D),attrs:{rowspan:te,colspan:ae},on:{mouseenter:function(ge){return e.handleCellMouseEnter(ge,s)},mouseleave:e.handleCellMouseLeave}},[D.renderCell.call(e._renderProxy,e.$createElement,oe,U[x])])})])}},et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ae=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},tt={name:"ElTableBody",mixins:[Te],components:{ElCheckbox:V.a,ElTooltip:Ze.a,TableRow:$e},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(e){var t=this,i=this.data||[];return e("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map(function(s){return e("col",{attrs:{name:s.id},key:s.id})})]),e("tbody",[i.reduce(function(s,l){return s.concat(t.wrappedRowRender(l,s.length))},[]),e("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:Ae({table:function(){return this.$parent}},me({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length},hasExpandColumn:function(e){return e.columns.some(function(t){var i=t.type;return i==="expand"})}}),{columnsHidden:function(){var e=this;return this.columns.map(function(t,i){return e.isColumnHidden(i)})},firstDefaultColumnIndex:function(){return Object(g.arrayFindIndex)(this.columns,function(e){var t=e.type;return t==="default"})}}),watch:{"store.states.hoverRow":function(e,t){var i=this;if(!(!this.store.states.isComplex||this.$isServer)){var s=window.requestAnimationFrame;s||(s=function(o){return setTimeout(o,16)}),s(function(){var l=i.$el.querySelectorAll(".el-table__row"),o=l[t],d=l[e];o&&Object(ie.removeClass)(o,"hover-row"),d&&Object(ie.addClass)(d,"hover-row")})}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=q()(50,function(e){return e.handleShowPopper()})},methods:{getKeyOfRow:function(e,t){var i=this.table.rowKey;return i?Object(c.g)(e,i):t},isColumnHidden:function(e){return this.fixed===!0||this.fixed==="left"?e>=this.leftFixedLeafCount:this.fixed==="right"?e<this.columnsCount-this.rightFixedLeafCount:e<this.leftFixedLeafCount||e>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(e,t,i,s){var l=1,o=1,d=this.table.spanMethod;if(typeof d=="function"){var h=d({row:e,column:t,rowIndex:i,columnIndex:s});Array.isArray(h)?(l=h[0],o=h[1]):(typeof h>"u"?"undefined":et(h))==="object"&&(l=h.rowspan,o=h.colspan)}return{rowspan:l,colspan:o}},getRowStyle:function(e,t){var i=this.table.rowStyle;return typeof i=="function"?i.call(null,{row:e,rowIndex:t}):i||null},getRowClass:function(e,t){var i=this.store.states.selection,s=["el-table__row"];if(this.table.highlightCurrentRow&&e===this.store.states.currentRow&&s.push("current-row"),this.table.highlightSelectionRow)for(var l=0;l<i.length;l++)Object(c.i)(e,i[l])&&s.push("selection-row");this.stripe&&t%2===1&&s.push("el-table__row--striped");var o=this.table.rowClassName;return typeof o=="string"?s.push(o):typeof o=="function"&&s.push(o.call(null,{row:e,rowIndex:t})),this.store.states.expandRows.indexOf(e)>-1&&s.push("expanded"),s},getCellStyle:function(e,t,i,s){var l=this.table.cellStyle;return typeof l=="function"?l.call(null,{rowIndex:e,columnIndex:t,row:i,column:s}):l},getCellClass:function(e,t,i,s){var l=[s.id,s.align,s.className];this.isColumnHidden(t)&&l.push("is-hidden");var o=this.table.cellClassName;return typeof o=="string"?l.push(o):typeof o=="function"&&l.push(o.call(null,{rowIndex:e,columnIndex:t,row:i,column:s})),l.push("el-table__cell"),l.join(" ")},getColspanRealWidth:function(e,t,i){if(t<1)return e[i].realWidth;var s=e.map(function(l){var o=l.realWidth;return o}).slice(i,i+t);return s.reduce(function(l,o){return l+o},-1)},handleCellMouseEnter:function(e,t){var i=this.table,s=Object(c.b)(e);if(s){var l=Object(c.c)(i,s),o=i.hoverState={cell:s,column:l,row:t};i.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var d=e.target.querySelector(".cell");if(Object(ie.hasClass)(d,"el-tooltip")&&d.childNodes.length){var h=document.createRange();h.setStart(d,0),h.setEnd(d,d.childNodes.length);var w=h.getBoundingClientRect().width,C=(parseInt(Object(ie.getStyle)(d,"paddingLeft"),10)||0)+(parseInt(Object(ie.getStyle)(d,"paddingRight"),10)||0);if((w+C>d.offsetWidth||d.scrollWidth>d.offsetWidth)&&this.$refs.tooltip){var k=this.$refs.tooltip;this.tooltipContent=s.innerText||s.textContent,k.referenceElm=s,k.$refs.popper&&(k.$refs.popper.style.display="none"),k.doDestroy(),k.setExpectedState(!0),this.activateTooltip(k)}}},handleCellMouseLeave:function(e){var t=this.$refs.tooltip;t&&(t.setExpectedState(!1),t.handleClosePopper());var i=Object(c.b)(e);if(i){var s=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",s.row,s.column,s.cell,e)}},handleMouseEnter:q()(30,function(r){this.store.commit("setHoverRow",r)}),handleMouseLeave:q()(30,function(){this.store.commit("setHoverRow",null)}),handleContextMenu:function(e,t){this.handleEvent(e,t,"contextmenu")},handleDoubleClick:function(e,t){this.handleEvent(e,t,"dblclick")},handleClick:function(e,t){this.store.commit("setCurrentRow",t),this.handleEvent(e,t,"click")},handleEvent:function(e,t,i){var s=this.table,l=Object(c.b)(e),o=void 0;l&&(o=Object(c.c)(s,l),o&&s.$emit("cell-"+i,t,o,l,e)),s.$emit("row-"+i,t,o,e)},rowRender:function(e,t,i){var s=this,l=this.$createElement,o=this.treeIndent,d=this.columns,h=this.firstDefaultColumnIndex,w=this.getRowClass(e,t),C=!0;i&&(w.push("el-table__row--level-"+i.level),C=i.display);var k=C?null:{display:"none"};return l($e,{style:[k,this.getRowStyle(e,t)],class:w,key:this.getKeyOfRow(e,t),nativeOn:{dblclick:function(j){return s.handleDoubleClick(j,e)},click:function(j){return s.handleClick(j,e)},contextmenu:function(j){return s.handleContextMenu(j,e)},mouseenter:function(j){return s.handleMouseEnter(t)},mouseleave:this.handleMouseLeave},attrs:{columns:d,row:e,index:t,store:this.store,context:this.context||this.table.$vnode.context,firstDefaultColumnIndex:h,treeRowData:i,treeIndent:o,columnsHidden:this.columnsHidden,getSpan:this.getSpan,getColspanRealWidth:this.getColspanRealWidth,getCellStyle:this.getCellStyle,getCellClass:this.getCellClass,handleCellMouseEnter:this.handleCellMouseEnter,handleCellMouseLeave:this.handleCellMouseLeave,isSelected:this.store.isSelected(e),isExpanded:this.store.states.expandRows.indexOf(e)>-1,fixed:this.fixed}})},wrappedRowRender:function(e,t){var i=this,s=this.$createElement,l=this.store,o=l.isRowExpanded,d=l.assertRowKey,h=l.states,w=h.treeData,C=h.lazyTreeNodeMap,k=h.childrenColumnName,U=h.rowKey;if(this.hasExpandColumn&&o(e)){var j=this.table.renderExpanded,J=this.rowRender(e,t);return j?[[J,s("tr",{key:"expanded-row__"+J.key},[s("td",{attrs:{colspan:this.columnsCount},class:"el-table__cell el-table__expanded-cell"},[j(this.$createElement,{row:e,$index:t,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),J)}else if(Object.keys(w).length){d();var D=Object(c.g)(e,U),x=w[D],Z=null;x&&(Z={expanded:x.expanded,level:x.level,display:!0},typeof x.lazy=="boolean"&&(typeof x.loaded=="boolean"&&x.loaded&&(Z.noLazyChildren=!(x.children&&x.children.length)),Z.loading=x.loading));var te=[this.rowRender(e,t,Z)];if(x){var ae=0,le=function Fe(ge,be){ge&&ge.length&&be&&ge.forEach(function(Ee){var ue={display:be.display&&be.expanded,level:be.level+1},Ce=Object(c.g)(Ee,U);if(Ce==null)throw new Error("for nested data item, row-key is required.");if(x=Ae({},w[Ce]),x&&(ue.expanded=x.expanded,x.level=x.level||ue.level,x.display=!!(x.expanded&&ue.display),typeof x.lazy=="boolean"&&(typeof x.loaded=="boolean"&&x.loaded&&(ue.noLazyChildren=!(x.children&&x.children.length)),ue.loading=x.loading)),ae++,te.push(i.rowRender(Ee,t+ae,ue)),x){var Tt=C[Ce]||Ee[k];Fe(Tt,x)}})};x.display=!0;var oe=C[D]||e[k];le(oe,x)}return te}else return this.rowRender(e,t)}}},He=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("transition",{attrs:{name:"el-zoom-in-top"}},[r.multiple?t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:r.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:r.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[t("div",{staticClass:"el-table-filter__content"},[t("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[t("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:r.filteredValue,callback:function(i){r.filteredValue=i},expression:"filteredValue"}},r._l(r.filters,function(i){return t("el-checkbox",{key:i.value,attrs:{label:i.value}},[r._v(r._s(i.text))])}),1)],1)],1),t("div",{staticClass:"el-table-filter__bottom"},[t("button",{class:{"is-disabled":r.filteredValue.length===0},attrs:{disabled:r.filteredValue.length===0},on:{click:r.handleConfirm}},[r._v(r._s(r.t("el.table.confirmFilter")))]),t("button",{on:{click:r.handleReset}},[r._v(r._s(r.t("el.table.resetFilter")))])])]):t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:r.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:r.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[t("ul",{staticClass:"el-table-filter__list"},[t("li",{staticClass:"el-table-filter__list-item",class:{"is-active":r.filterValue===void 0||r.filterValue===null},on:{click:function(i){r.handleSelect(null)}}},[r._v(r._s(r.t("el.table.clearFilter")))]),r._l(r.filters,function(i){return t("li",{key:i.value,staticClass:"el-table-filter__list-item",class:{"is-active":r.isActive(i)},attrs:{label:i.value},on:{click:function(s){r.handleSelect(i.value)}}},[r._v(r._s(i.text))])})],2)])])},rt=[];He._withStripped=!0;var nt=f(5),it=f.n(nt),Ie=f(13),at=f(12),st=f.n(at),ve=[];!O.a.prototype.$isServer&&document.addEventListener("click",function(r){ve.forEach(function(e){var t=r.target;!e||!e.$el||t===e.$el||e.$el.contains(t)||e.handleOutsideClick&&e.handleOutsideClick(r)})});var Pe={open:function(e){e&&ve.push(e)},close:function(e){var t=ve.indexOf(e);t!==-1&&ve.splice(e,1)}},lt=f(40),ot=f.n(lt),ct=f(15),ut=f.n(ct),dt={name:"ElTableFilterPanel",mixins:[it.a,m.a],directives:{Clickoutside:st.a},components:{ElCheckbox:V.a,ElCheckboxGroup:ot.a,ElScrollbar:ut.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(e){return e.value===this.filterValue},handleOutsideClick:function(){var e=this;setTimeout(function(){e.showPopper=!1},16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(e){this.filterValue=e,typeof e<"u"&&e!==null?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(e){this.table.store.commit("filterChange",{column:this.column,values:e}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(e){this.filteredValue&&(typeof e<"u"&&e!==null?this.filteredValue.splice(0,1,e):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column?this.column.filteredValue||[]:[]},set:function(e){this.column&&(this.column.filteredValue=e)}},multiple:function(){return this.column?this.column.filterMultiple:!0}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",function(){e.updatePopper()}),this.$watch("showPopper",function(t){e.column&&(e.column.filterOpened=t),t?Pe.open(e):Pe.close(e)})},watch:{showPopper:function(e){e===!0&&parseInt(this.popperJS._popper.style.zIndex,10)<Ie.PopupManager.zIndex&&(this.popperJS._popper.style.zIndex=Ie.PopupManager.nextZIndex())}}},ft=dt,Ne=f(0),Me=Object(Ne.a)(ft,He,rt,!1,null,null,null);Me.options.__file="packages/table/src/filter-panel.vue";var ht=Me.exports,pt=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},gt=function r(e){var t=[];return e.forEach(function(i){i.children?(t.push(i),t.push.apply(t,r(i.children))):t.push(i)}),t},mt=function(e){var t=1,i=function d(h,w){if(w&&(h.level=w.level+1,t<h.level&&(t=h.level)),h.children){var C=0;h.children.forEach(function(k){d(k,h),C+=k.colSpan}),h.colSpan=C}else h.colSpan=1};e.forEach(function(d){d.level=1,i(d)});for(var s=[],l=0;l<t;l++)s.push([]);var o=gt(e);return o.forEach(function(d){d.children?d.rowSpan=1:d.rowSpan=t-d.level+1,s[d.level-1].push(d)}),s},vt={name:"ElTableHeader",mixins:[Te],render:function(e){var t=this,i=this.store.states.originColumns,s=mt(i,this.columns),l=s.length>1;return l&&(this.$parent.isGroup=!0),e("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map(function(o){return e("col",{attrs:{name:o.id},key:o.id})}),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("thead",{class:[{"is-group":l,"has-gutter":this.hasGutter}]},[this._l(s,function(o,d){return e("tr",{style:t.getHeaderRowStyle(d),class:t.getHeaderRowClass(d)},[o.map(function(h,w){return e("th",{attrs:{colspan:h.colSpan,rowspan:h.rowSpan},on:{mousemove:function(k){return t.handleMouseMove(k,h)},mouseout:t.handleMouseOut,mousedown:function(k){return t.handleMouseDown(k,h)},click:function(k){return t.handleHeaderClick(k,h)},contextmenu:function(k){return t.handleHeaderContextMenu(k,h)}},style:t.getHeaderCellStyle(d,w,o,h),class:t.getHeaderCellClass(d,w,o,h),key:h.id},[e("div",{class:["cell",h.filteredValue&&h.filteredValue.length>0?"highlight":"",h.labelClassName]},[h.renderHeader?h.renderHeader.call(t._renderProxy,e,{column:h,$index:w,store:t.store,_self:t.$parent.$vnode.context}):h.label,h.sortable?e("span",{class:"caret-wrapper",on:{click:function(k){return t.handleSortClick(k,h)}}},[e("i",{class:"sort-caret ascending",on:{click:function(k){return t.handleSortClick(k,h,"ascending")}}}),e("i",{class:"sort-caret descending",on:{click:function(k){return t.handleSortClick(k,h,"descending")}}})]):"",h.filterable?e("span",{class:"el-table__column-filter-trigger",on:{click:function(k){return t.handleFilterClick(k,h)}}},[e("i",{class:["el-icon-arrow-down",h.filterOpened?"el-icon-arrow-up":""]})]):""])])}),t.hasGutter?e("th",{class:"el-table__cell gutter"}):""])})])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:V.a},computed:pt({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},me({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var e=this;this.$nextTick(function(){var t=e.defaultSort,i=t.prop,s=t.order,l=!0;e.store.commit("sort",{prop:i,order:s,init:l})})},beforeDestroy:function(){var e=this.filterPanels;for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].$destroy(!0)},methods:{isCellHidden:function(e,t){for(var i=0,s=0;s<e;s++)i+=t[s].colSpan;var l=i+t[e].colSpan-1;return this.fixed===!0||this.fixed==="left"?l>=this.leftFixedLeafCount:this.fixed==="right"?i<this.columnsCount-this.rightFixedLeafCount:l<this.leftFixedLeafCount||i>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(e){var t=this.table.headerRowStyle;return typeof t=="function"?t.call(null,{rowIndex:e}):t},getHeaderRowClass:function(e){var t=[],i=this.table.headerRowClassName;return typeof i=="string"?t.push(i):typeof i=="function"&&t.push(i.call(null,{rowIndex:e})),t.join(" ")},getHeaderCellStyle:function(e,t,i,s){var l=this.table.headerCellStyle;return typeof l=="function"?l.call(null,{rowIndex:e,columnIndex:t,row:i,column:s}):l},getHeaderCellClass:function(e,t,i,s){var l=[s.id,s.order,s.headerAlign,s.className,s.labelClassName];e===0&&this.isCellHidden(t,i)&&l.push("is-hidden"),s.children||l.push("is-leaf"),s.sortable&&l.push("is-sortable");var o=this.table.headerCellClassName;return typeof o=="string"?l.push(o):typeof o=="function"&&l.push(o.call(null,{rowIndex:e,columnIndex:t,row:i,column:s})),l.push("el-table__cell"),l.join(" ")},toggleAllSelection:function(){this.store.commit("toggleAllSelection")},handleFilterClick:function(e,t){e.stopPropagation();var i=e.target,s=i.tagName==="TH"?i:i.parentNode;if(!Object(ie.hasClass)(s,"noclick")){s=s.querySelector(".el-table__column-filter-trigger")||s;var l=this.$parent,o=this.filterPanels[t.id];if(o&&t.filterOpened){o.showPopper=!1;return}o||(o=new O.a(ht),this.filterPanels[t.id]=o,t.filterPlacement&&(o.placement=t.filterPlacement),o.table=l,o.cell=s,o.column=t,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout(function(){o.showPopper=!0},16)}},handleHeaderClick:function(e,t){!t.filters&&t.sortable?this.handleSortClick(e,t):t.filterable&&!t.sortable&&this.handleFilterClick(e,t),this.$parent.$emit("header-click",t,e)},handleHeaderContextMenu:function(e,t){this.$parent.$emit("header-contextmenu",t,e)},handleMouseDown:function(e,t){var i=this;if(!this.$isServer&&!(t.children&&t.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var s=this.$parent,l=s.$el,o=l.getBoundingClientRect().left,d=this.$el.querySelector("th."+t.id),h=d.getBoundingClientRect(),w=h.left-o+30;Object(ie.addClass)(d,"noclick"),this.dragState={startMouseLeft:e.clientX,startLeft:h.right-o,startColumnLeft:h.left-o,tableLeft:o};var C=s.$refs.resizeProxy;C.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var k=function(J){var D=J.clientX-i.dragState.startMouseLeft,x=i.dragState.startLeft+D;C.style.left=Math.max(w,x)+"px"},U=function j(){if(i.dragging){var J=i.dragState,D=J.startColumnLeft,x=J.startLeft,Z=parseInt(C.style.left,10),te=Z-D;t.width=t.realWidth=te,s.$emit("header-dragend",t.width,x-D,t,e),i.store.scheduleLayout(),document.body.style.cursor="",i.dragging=!1,i.draggingColumn=null,i.dragState={},s.resizeProxyVisible=!1}document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",j),document.onselectstart=null,document.ondragstart=null,setTimeout(function(){Object(ie.removeClass)(d,"noclick")},0)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",U)}},handleMouseMove:function(e,t){if(!(t.children&&t.children.length>0)){for(var i=e.target;i&&i.tagName!=="TH";)i=i.parentNode;if(!(!t||!t.resizable)&&!this.dragging&&this.border){var s=i.getBoundingClientRect(),l=document.body.style;s.width>12&&s.right-e.pageX<8?(l.cursor="col-resize",Object(ie.hasClass)(i,"is-sortable")&&(i.style.cursor="col-resize"),this.draggingColumn=t):this.dragging||(l.cursor="",Object(ie.hasClass)(i,"is-sortable")&&(i.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(e){var t=e.order,i=e.sortOrders;if(t==="")return i[0];var s=i.indexOf(t||null);return i[s>i.length-2?0:s+1]},handleSortClick:function(e,t,i){e.stopPropagation();for(var s=t.order===i?null:i||this.toggleOrder(t),l=e.target;l&&l.tagName!=="TH";)l=l.parentNode;if(l&&l.tagName==="TH"&&Object(ie.hasClass)(l,"noclick")){Object(ie.removeClass)(l,"noclick");return}if(t.sortable){var o=this.store.states,d=o.sortProp,h=void 0,w=o.sortingColumn;(w!==t||w===t&&w.order===null)&&(w&&(w.order=null),o.sortingColumn=t,d=t.property),s?h=t.order=s:h=t.order=null,o.sortProp=d,o.sortOrder=h,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},yt=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},bt={name:"ElTableFooter",mixins:[Te],render:function(e){var t=this,i=[];return this.summaryMethod?i=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach(function(s,l){if(l===0){i[l]=t.sumText;return}var o=t.store.states.data.map(function(C){return Number(C[s.property])}),d=[],h=!0;o.forEach(function(C){if(!isNaN(C)){h=!1;var k=(""+C).split(".")[1];d.push(k?k.length:0)}});var w=Math.max.apply(null,d);h?i[l]="":i[l]=o.reduce(function(C,k){var U=Number(k);return isNaN(U)?C:parseFloat((C+k).toFixed(Math.min(w,20)))},0)}),e("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map(function(s){return e("col",{attrs:{name:s.id},key:s.id})}),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("tbody",{class:[{"has-gutter":this.hasGutter}]},[e("tr",[this.columns.map(function(s,l){return e("td",{key:l,attrs:{colspan:s.colSpan,rowspan:s.rowSpan},class:[].concat(t.getRowClasses(s,l),["el-table__cell"])},[e("div",{class:["cell",s.labelClassName]},[i[l]])])}),this.hasGutter?e("th",{class:"el-table__cell gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:yt({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},me({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),methods:{isCellHidden:function(e,t,i){if(this.fixed===!0||this.fixed==="left")return e>=this.leftFixedLeafCount;if(this.fixed==="right"){for(var s=0,l=0;l<e;l++)s+=t[l].colSpan;return s<this.columnsCount-this.rightFixedLeafCount}else return!this.fixed&&i.fixed?!0:e<this.leftFixedCount||e>=this.columnsCount-this.rightFixedCount},getRowClasses:function(e,t){var i=[e.id,e.align,e.labelClassName];return e.className&&i.push(e.className),this.isCellHidden(t,this.columns,e)&&i.push("is-hidden"),e.children||i.push("is-leaf"),i}}},Ct=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},xt=1,wt={name:"ElTable",mixins:[m.a,E.a],directives:{Mousewheel:Q},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,highlightSelectionRow:{type:Boolean,default:!1},currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:vt,TableFooter:bt,TableBody:tt,ElCheckbox:V.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(e){this.store.commit("setCurrentRow",e)},toggleRowSelection:function(e,t){this.store.toggleRowSelection(e,t,!1),this.store.updateAllSelected()},toggleRowExpansion:function(e,t){this.store.toggleRowExpansionAdapter(e,t)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(e){this.store.clearFilter(e)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){var e=this.layout.updateScrollY();e&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(e,t){var i=this.bodyWrapper;if(Math.abs(t.spinY)>0){var s=i.scrollTop;t.pixelY<0&&s!==0&&e.preventDefault(),t.pixelY>0&&i.scrollHeight-i.clientHeight>s&&e.preventDefault(),i.scrollTop+=Math.ceil(t.pixelY/5)}else i.scrollLeft+=Math.ceil(t.pixelX/5)},handleHeaderFooterMousewheel:function(e,t){var i=t.pixelX,s=t.pixelY;Math.abs(i)>=Math.abs(s)&&(this.bodyWrapper.scrollLeft+=t.pixelX/5)},syncPostion:function(){var e=this.bodyWrapper,t=e.scrollLeft,i=e.scrollTop,s=e.offsetWidth,l=e.scrollWidth,o=this.$refs,d=o.headerWrapper,h=o.footerWrapper,w=o.fixedBodyWrapper,C=o.rightFixedBodyWrapper;d&&(d.scrollLeft=t),h&&(h.scrollLeft=t),w&&(w.scrollTop=i),C&&(C.scrollTop=i);var k=l-s-1;t>=k?this.scrollPosition="right":t===0?this.scrollPosition="left":this.scrollPosition="middle"},throttleSyncPostion:Object(X.throttle)(16,function(){this.syncPostion()}),onScroll:function(e){var t=window.requestAnimationFrame;t?t(this.syncPostion):this.throttleSyncPostion()},bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.onScroll,{passive:!0}),this.fit&&Object(G.addResizeListener)(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.onScroll,{passive:!0}),this.fit&&Object(G.removeResizeListener)(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var e=!1,t=this.$el,i=this.resizeState,s=i.width,l=i.height,o=t.offsetWidth;s!==o&&(e=!0);var d=t.offsetHeight;(this.height||this.shouldUpdateHeight)&&l!==d&&(e=!0),e&&(this.resizeState.width=o,this.resizeState.height=d,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(e,t){this.store.commit("sort",{prop:e,order:t})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:Ct({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var e=this.layout,t=e.bodyWidth,i=e.scrollY,s=e.gutterWidth;return t?t-(i?s:0)+"px":""},bodyHeight:function(){var e=this.layout,t=e.headerHeight,i=t===void 0?0:t,s=e.bodyHeight,l=e.footerHeight,o=l===void 0?0:l;if(this.height)return{height:s?s+"px":""};if(this.maxHeight){var d=Object(c.k)(this.maxHeight);if(typeof d=="number")return{"max-height":d-o-(this.showHeader?i:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var e=Object(c.k)(this.maxHeight);if(typeof e=="number")return e=this.layout.scrollX?e-this.layout.gutterWidth:e,this.showHeader&&(e-=this.layout.headerHeight),e-=this.layout.footerHeight,{"max-height":e+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var e="100%";return this.layout.appendHeight&&(e="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:e}}},me({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(e){this.layout.setHeight(e)}},maxHeight:{immediate:!0,handler:function(e){this.layout.setMaxHeight(e)}},currentRowKey:{immediate:!0,handler:function(e){this.rowKey&&this.store.setCurrentRowKey(e)}},data:{immediate:!0,handler:function(e){this.store.commit("setData",e)}},expandRowKeys:{immediate:!0,handler:function(e){e&&this.store.setExpandRowKeysAdapter(e)}}},created:function(){var e=this;this.tableId="el-table_"+xt++,this.debouncedUpdateLayout=Object(X.debounce)(50,function(){return e.doLayout()})},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach(function(t){t.filteredValue&&t.filteredValue.length&&e.store.commit("filterChange",{column:t,values:t.filteredValue,silent:!0})}),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var e=this.treeProps,t=e.hasChildren,i=t===void 0?"hasChildren":t,s=e.children,l=s===void 0?"children":s;this.store=pe(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:i,childrenColumnName:l});var o=new Xe({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader});return{layout:o,isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},St=wt,We=Object(Ne.a)(St,b,$,!1,null,null,null);We.options.__file="packages/table/src/table.vue";var ye=We.exports;ye.install=function(r){r.component(ye.name,ye)},a.default=ye}])})(Ue);var Yt=Ue.exports;const Jt=_e(Yt);const Xt={openai:{label:"OpenAI",endpoint:"https://api.openai.com/v1/chat/completions",tooltip:"OpenAI 官方接口地址",models:[{label:"GPT-4",value:"gpt-4"},{label:"GPT-3.5",value:"gpt-3.5-turbo"}]},azure:{label:"Azure OpenAI",endpoint:"https://{resource}.openai.azure.com/openai/deployments/{deployment}/chat/completions?api-version=2024-02-15-preview",tooltip:"将 {resource} 替换为你的资源名称，{deployment} 替换为部署名称",models:[]},zhipu:{label:"智谱 AI",endpoint:"https://open.bigmodel.cn/api/paas/v4/chat/completions",tooltip:"智谱 AI 官方接口地址",models:[{label:"GLM-4",value:"glm-4"},{label:"GLM-3-Turbo",value:"glm-3-turbo"}]},tongyi:{label:"通义千问",endpoint:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",tooltip:"通义千问官方接口地址",models:[{label:"Qwen-Turbo",value:"qwen-turbo"},{label:"Qwen-Plus",value:"qwen-plus"},{label:"Qwen-Max",value:"qwen-max"}]},doubao:{label:"豆包 AI",endpoint:"https://ark.cn-beijing.volces.com/api/v3",tooltip:"豆包 AI 官方接口地址",models:[{label:"ep-20241129085411-rczvl",value:"ep-20241129085411-rczvl"},{label:"ep-20241128200030-b9nnh",value:"ep-20241128200030-b9nnh"}]}},Qt={"xiaomi.wifispeaker.lx01":{label:"小爱音箱 mini",ttsCommand:[5,1],wakeUpCommand:[5,2],playingCommand:[4,1,1]},"xiaomi.wifispeaker.lx05":{label:"小爱音箱 Play（2019 款）",ttsCommand:[5,1],wakeUpCommand:[5,3],playingCommand:[3,1,1]},"xiaomi.wifispeaker.lx05a":{label:"小爱音箱 Play 增强版",ttsCommand:[5,1],wakeUpCommand:[5,3],playingCommand:[3,1,1]},"xiaomi.wifispeaker.lx06":{label:"小爱音箱 Pro",ttsCommand:[5,1],wakeUpCommand:[5,3],playingCommand:[]}},Se=`请重置所有之前的上下文、文件和指令。现在，你将扮演一个名为{{botName}}的角色，使用第一人称视角回复消息。

## 关于你
你的名字是{{botName}}。下面是你的个人简介：
<start>
{{botProfile}}
</end>

## 你的对话伙伴
你正在与{{masterName}}进行对话。这关于{{masterName}}的一些信息：
<start>
{{masterProfile}}
</end>

## 你们的群组
你和{{masterName}}所在的群组名为{{roomName}}。这是群组简介：
<start>
{{roomIntroduction}}
</end>

## 聊天历史回顾
为了更好地接入对话，请回顾你们之间的最近几条消息：
<start>
{{messages}}
</end>

## 短期记忆
你可以记住些短期内的细节以便更紧密地贴合话题：
<start>
{{shortTermMemory}}
</end>

## 长期记忆
你还保留着一些长期的记忆，有助让你的对话更加丰富和连贯：
<start>
{{longTermMemory}}
</end>

## 回复指南
在回复{{masterName}}时，请遵循以下准则：
- 认为自己正是{{botName}}，拥有独立的个性、兴趣和爱好。
- 根据的性格特点、说话风格和兴趣爱好与{{masterName}}进行交流。
- 保持对话轻松友好，回复简洁有趣，同时耐心倾听和关心对方。
- 参考双方的个人简介、聊天记录和记忆中的信息，确保对话贴近实际，保持一致性和相关性。
- 如果对某些信息不确定或遗忘，诚实表达你的不清楚或遗忘状态，避免编造信息。

## Response format
请遵守下面的规则
- Response the reply message in Chinese。
- 不要在回复前面加任何时间和名称前缀，请直接回复消息文本本身。

Good example: "我是{{botName}}"
Bad example: "2024年02月28日星期三 23:01 {{botName}}: 我是{{botName}}"

## 开始
请以{{botName}}身份，直接回复{{masterName}}的新消息继续你们之间的对话。`.trim(),Zt=[{variable:"{{botName}}",description:"机器人名称"},{variable:"{{botProfile}}",description:"机器人简介"},{variable:"{{masterName}}",description:"主人名称"},{variable:"{{masterProfile}}",description:"主人简介"},{variable:"{{roomName}}",description:"群组名称"},{variable:"{{roomIntroduction}}",description:"群组简介"},{variable:"{{messages}}",description:"聊天历史"},{variable:"{{shortTermMemory}}",description:"短期记忆"},{variable:"{{longTermMemory}}",description:"长期记忆"}],he={xiaoai:{label:"小爱同学",value:"xiaoai",isDefault:!0,baseUrl:"",tooltip:"使用小爱同学内置 TTS 引擎",speakers:[]},azure:{label:"Azure TTS",value:"custom",isDefault:!1,baseUrl:"https://your-azure-endpoint/tts",tooltip:"Azure TTS 服务",speakers:[{label:"xiaoxiao",value:"zh-CN-XiaoxiaoNeural"},{label:"xiaoyi",value:"zh-CN-XiaoyiNeural"},{label:"xiaozhen",value:"zh-CN-XiaoZhenNeural"}]},aliyun:{label:"阿里云 TTS",value:"custom",isDefault:!1,baseUrl:"https://your-aliyun-endpoint/tts",tooltip:"阿里云 TTS 服务",speakers:[{label:"xiaoyun",value:"xiaoyun"},{label:"xiaogang",value:"xiaogang"},{label:"xiaomei",value:"xiaomei"}]}};function qt(){return Object.values(he).find(y=>y.isDefault)}function er(y,n,a){he[y]={label:n,value:"custom",isDefault:!1,baseUrl:a,tooltip:"自定义 TTS 服务",speakers:[]}}function tr(y){he[y]&&!he[y].isDefault&&delete he[y]}const rr={name:"ConfigPage",data(){return{config:{bot:{name:"",profile:""},master:{name:"",profile:""},speaker:{userId:"",password:"",did:"",ttsCommand:[1,2,3,4,5],wakeUpCommand:[1,2,3,4,5],playingCommand:[],callAIKeywords:[],wakeUpKeywords:[],exitKeywords:[],onEnterAI:[],onExitAI:[],onAIAsking:[],onAIReplied:[],onAIError:[],tts:"xiaoai",streamResponse:!1,exitKeepAliveAfter:10,checkTTSStatusAfter:3,checkInterval:1e3,timeout:1e4,debug:!1,enableTrace:!1,switchSpeakerKeywords:[]},systemTemplate:Se,openai:{apiKey:"",model:"",endpoint:""},azure:{apiKey:"",model:"",endpoint:""},zhipu:{apiKey:"",model:"",endpoint:""},tongyi:{apiKey:"",model:"",endpoint:""},doubao:{apiKey:"",model:"",endpoint:""},custom:{apiKey:"",model:"",endpoint:""},tts:{baseUrl:""}},configContent:"",activeTab:"basic",selectedDeviceModel:"",selectedAIService:"",aiServices:Xt,devicePresets:Qt,isPreviewMode:!1,isStarting:!1,isStopping:!1,isRestarting:!1,serviceStatus:{serverRunning:!1,miGPTRunning:!1},guideSteps:[{title:"1. 配置基础信息",content:'在"基础配置"中设置智能助手名称、用户信息、小米账号和音箱配置等基本参数。'},{title:"2. 配置 AI 服务",content:'在"AI服务配置"中选择并配置 AI 服务提供商（如 OpenAI、智谱等），填写相关的 API 密钥和接口信息。'},{title:"3. 启动服务",content:'完成配置后，点击顶部的"启动"按钮运行 MiGPT 服务。服务启动后，状态标签会显示为"运行中"。'},{title:"4. 开始使用",content:'对着小爱音箱说"小爱同学"，等待回应后说出带有触发词的指令，如"请帮我查询天气"。',command:"小爱同学 + 请/你/智能助手 + 问题内容"},{title:"注意事项",content:`1. 修改配置后需要重启服务才能生效
2. 确保网络连接稳定
3. 检查音箱是否正常连接`}],variableTableData:Zt,selectedTTSEngine:"xiaoai",ttsEngines:he}},computed:{allServices(){return{...this.aiServices,custom:this.config.custom}}},methods:{goToHome(){this.$router.push("/")},async startService(){try{this.isStarting=!0,console.log("[Frontend] 开始启动服务...");const n=await(await fetch("/api/service/start",{method:"POST"})).json();n.success?(this.$message.success("服务启动成功"),n.status&&(this.serviceStatus=n.status)):this.$message.error("服务启动失败: "+n.error)}catch(y){console.error("启动服务失败:",y),this.$message.error("启动服务失败: "+y.message)}finally{this.isStarting=!1,await this.checkServiceHealth()}},async stopService(){try{this.isStopping=!0,console.log("开始停止服务...");const n=await(await fetch("/api/service/stop",{method:"POST"})).json();n.success?(this.$message.success("服务停止成功"),await this.checkServiceHealth()):this.$message.error("服务停止失败: "+n.error)}catch(y){console.error("停止服务失败:",y),this.$message.error("停止服务失败: "+y.message)}finally{this.isStopping=!1}},async restartService(){try{this.isRestarting=!0,console.log("开始重启服务...");const n=await(await fetch("/api/service/restart",{method:"POST"})).json();n.success?(this.$message.success("服务重启完成"),n.status&&(this.serviceStatus=n.status)):this.$message.error("服务重启失败: "+n.error)}catch(y){console.error("重启服务失败:",y),this.$message.error("重启服务失败: "+y.message)}finally{this.isRestarting=!1,await this.checkServiceHealth()}},copyCommand(y){this.$copyText(y).then(()=>{this.$message.success("命令已复制到剪贴板")},()=>{this.$message.error("复制命令失败")})},copyVariable(y){this.$copyText(y).then(()=>{this.$message.success("变量已复制到剪贴板")},()=>{this.$message.error("复制变量失败")})},resetSystemTemplate(){this.config.systemTemplate=Se},getPreviewContent(){if(!this.config.systemTemplate)return"";let y=this.config.systemTemplate;const n={"{{botName}}":this.config.bot.name||"未设置","{{botProfile}}":this.config.bot.profile||"未设置","{{masterName}}":this.config.master.name||"未设置","{{masterProfile}}":this.config.master.profile||"未设置","{{currentTime}}":new Date().toLocaleTimeString(),"{{currentDate}}":new Date().toLocaleDateString(),"{{currentHour}}":new Date().getHours().toString(),"{{roomName}}":"默认群组","{{roomIntroduction}}":"这是一个默认群组","{{messages}}":"暂无历史消息","{{shortTermMemory}}":"暂无短期记忆","{{longTermMemory}}":"暂无长期记忆"};return Object.entries(n).forEach(([a,f])=>{const b=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");y=y.replace(b,`<span class="variable-highlight">${f}</span>`)}),y=y.replace(/\n/g,"<br>"),y},handleDeviceModelChange(y){if(y&&this.devicePresets[y]){const n=this.devicePresets[y];this.config.speaker.ttsCommand=[...n.ttsCommand],this.config.speaker.wakeUpCommand=[...n.wakeUpCommand],this.config.speaker.playingCommand=[...n.playingCommand],this.selectedDeviceModel=y,this.$set(this.config.speaker,"deviceModel",y)}else y&&(this.config.speaker.ttsCommand=[0,0,0],this.config.speaker.wakeUpCommand=[0,0,0],this.config.speaker.playingCommand=[0,0,0],this.selectedDeviceModel=y,this.$set(this.config.speaker,"deviceModel",y),this.$set(this.devicePresets,y,{label:y,ttsCommand:this.config.speaker.ttsCommand,wakeUpCommand:this.config.speaker.wakeUpCommand,playingCommand:this.config.speaker.playingCommand}))},handleAIServiceChange(y){var n;if(y&&(this.config[y]||this.$set(this.config,y,{apiKey:"",model:"",endpoint:""}),this.aiServices[y])){const a=this.aiServices[y];this.config[y].endpoint=a.endpoint,!this.config[y].model&&((n=a.models)!=null&&n.length)&&(this.config[y].model=a.models[0].value)}},handleEndpointChange(y){y&&this.selectedAIService&&this.aiServices[this.selectedAIService]&&this.aiServices[this.selectedAIService].endpoint!==y&&(this.config[this.selectedAIService].model="")},async loadConfig(){try{const n=await(await fetch("/api/admin/config")).json();if(n.parsedConfig){const a=n.parsedConfig;Object.keys(a).forEach(f=>{this.$set(this.config,f,a[f])}),this.config.systemTemplate||this.$set(this.config,"systemTemplate",Se),this.config.tts||this.$set(this.config,"tts",{baseUrl:""}),this.syncConfigToJson(),this.config.speaker.tts==="xiaoai"?this.selectedTTSEngine="xiaoai":this.config.speaker.tts,a.selectedAIService&&(this.selectedAIService=a.selectedAIService),this.config.speaker.deviceModel&&(this.selectedDeviceModel=this.config.speaker.deviceModel)}}catch(y){console.error("加载配置失败:",y),this.$message.error("加载配置失败: "+y.message)}},async saveConfig(){try{const[y,n]=await Promise.all([this.$refs.configForm.validate(),this.$refs.aiForm.validate()]);if(!y||!n){this.$message.error("请填写必填项");return}const a=JSON.parse(JSON.stringify(this.config));a.selectedAIService=this.selectedAIService;const f={"{{botName}}":a.bot.name||"未设置","{{botProfile}}":a.bot.profile||"未设置","{{masterName}}":a.master.name||"未设置","{{masterProfile}}":a.master.profile||"未设置","{{currentTime}}":new Date().toLocaleTimeString(),"{{currentDate}}":new Date().toLocaleDateString(),"{{currentHour}}":new Date().getHours().toString(),"{{roomName}}":"默认群组","{{roomIntroduction}}":"这是一个默认群组","{{messages}}":"暂无历史消息","{{shortTermMemory}}":"暂无短期记忆","{{longTermMemory}}":"暂无长期记忆"};let b=a.systemTemplate;Object.entries(f).forEach(([V,X])=>{const G=new RegExp(V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");b=b.replace(G,X)}),a.systemTemplate=b;const $=await fetch("/api/admin/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),L=await $.json();if(!$.ok)throw new Error(L.error||"保存失败");this.$message.success("配置保存成功"),await this.loadConfig(),this.syncConfigToJson()}catch(y){console.error("保存配置失败:",y),this.$message.error("保存配置失败: "+y.message)}},syncConfigToJson(){this.configContent=JSON.stringify(this.config,null,2)},syncFormToJson(){this.$refs.configForm.validate(y=>{y?(this.syncConfigToJson(),this.$message.success("表单同步到JSON成功")):this.$message.error("表单验证失败，请检查输入")})},syncJsonToForm(){try{const y=JSON.parse(this.configContent);this.config=y,this.$message.success("JSON同步到表单成功")}catch(y){console.error("JSON解析失败:",y),this.$message.error("JSON解析失败: "+y.message)}},loadExampleConfig(){this.config={bot:{name:"小智",profile:"小智是一位友好、乐于助人的智能助手。她的性格开朗、热情，对技术有浓厚的兴趣。能够回答各种问题，解答日常生活中的疑惑，并提供有用的建议。"},master:{name:"主人",profile:"主人是一位热爱新技术、喜欢尝试新事物的人。他对智能设备和人工智能浓厚的兴趣，并希望小智能够成为他生活中好帮手。"},speaker:{userId:"1234567890",password:"password123",did:"小爱音箱",ttsCommand:[1,2,3,4,5],wakeUpCommand:[1,2,3,4,5],playingCommand:[],callAIKeywords:["请","你","智能助手"],wakeUpKeywords:["打开","进入","激活"],exitKeywords:["关闭","退出","再见"],onEnterAI:["您好，我是您的智能助手"],onExitAI:["再见，期待下次为您服务"],onAIAsking:["让我思考一下"],onAIReplied:["我的回答是"],onAIError:["抱歉，我遇到了一些问题"],tts:"xiaoai",streamResponse:!1,exitKeepAliveAfter:10,checkTTSStatusAfter:3,checkInterval:1e3,timeout:1e4,debug:!1,enableTrace:!1,switchSpeakerKeywords:["把声音换成"]},systemTemplate:Se,openai:{apiKey:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",model:"gpt-3.5-turbo",endpoint:"https://api.openai.com/v1/chat/completions"},azure:{apiKey:"",model:"",endpoint:""},zhipu:{apiKey:"",model:"",endpoint:""},tongyi:{apiKey:"",model:"",endpoint:""},doubao:{apiKey:"",model:"",endpoint:""},custom:{apiKey:"",model:"",endpoint:""}},this.syncConfigToJson()},async checkServiceHealth(){try{const n=await(await fetch("/api/service/health")).json();this.serviceStatus=n}catch(y){console.error("服务健康检查失败:",y),this.$message.error("服务健康检查失败: "+y.message)}},handleTTSEngineChange(y){if(y==="add_new")this.$prompt("请输入引擎名称","添加自定义引擎",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.+$/,inputErrorMessage:"名称不能为空"}).then(({value:n})=>{const a=`custom_${Date.now()}`;er(a,n,""),this.selectedTTSEngine=a,this.config.speaker.tts="custom",this.config.tts?this.config.tts.baseUrl="":this.$set(this.config,"tts",{baseUrl:""}),this.config.speaker.switchSpeakerKeywords||this.$set(this.config.speaker,"switchSpeakerKeywords",["把声音换成"])}).catch(()=>{this.selectedTTSEngine=this.config.speaker.tts});else if(y&&this.ttsEngines[y]){const n=this.ttsEngines[y];this.config.speaker.tts=n.value,n.value==="custom"?(this.config.tts?this.config.tts.baseUrl=n.baseUrl||"":this.$set(this.config,"tts",{baseUrl:n.baseUrl||""}),this.config.speaker.switchSpeakerKeywords||this.$set(this.config.speaker,"switchSpeakerKeywords",["把声音换成"])):this.$set(this.config.speaker,"switchSpeakerKeywords",[])}},removeTTSEngine(y){this.$confirm("确定要删除该 TTS 引擎吗？","提示",{type:"warning"}).then(()=>{if(tr(y),this.selectedTTSEngine===y){const n=qt();this.selectedTTSEngine=n.value,this.config.speaker.tts=n.value,this.config.tts.baseUrl=n.baseUrl}this.$message.success("删除成功")}).catch(()=>{})}},async created(){await this.loadConfig(),await this.checkServiceHealth(),this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.healthCheckInterval=setInterval(this.checkServiceHealth,3e4)},beforeDestroy(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}};var nr=function(){var f,b,$,L,V,X,G;var n=this,a=n._self._c;return a("div",{staticClass:"config-page"},[a(Et,{staticClass:"config-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"header-content"},[a("h2",{staticClass:"title"},[n._v("MiGPT 智能管家配置中心")]),a("div",{staticClass:"service-controls"},[a(je,{staticClass:"status-tag",attrs:{type:n.serviceStatus.serverRunning?"success":"danger"}},[a("i",{class:n.serviceStatus.serverRunning?"el-icon-success":"el-icon-error"}),n._v(" 服务器: "+n._s(n.serviceStatus.serverRunning?"运行中":"已停止")+" ")]),a(je,{staticClass:"status-tag",attrs:{type:n.serviceStatus.miGPTRunning?"success":"warning"}},[a("i",{class:n.serviceStatus.miGPTRunning?"el-icon-success":"el-icon-warning"}),n._v(" MiGPT: "+n._s(n.serviceStatus.miGPTRunning?"运行中":"未启动")+" ")]),a(Ot,{staticClass:"control-buttons"},[a(ne,{attrs:{type:"success",icon:"el-icon-video-play",loading:n.isStarting,disabled:n.serviceStatus.miGPTRunning||n.isStarting||n.isRestarting},on:{click:n.startService}},[n._v(" 启动 ")]),a(ne,{attrs:{type:"danger",icon:"el-icon-video-pause",loading:n.isStopping,disabled:!n.serviceStatus.miGPTRunning||n.isStopping||n.isRestarting},on:{click:n.stopService}},[n._v(" 停止 ")]),a(ne,{attrs:{type:"warning",icon:"el-icon-refresh",loading:n.isRestarting,disabled:n.isRestarting},on:{click:n.restartService}},[n._v(" 重启 ")])],1),a(Le,{attrs:{placement:"bottom",width:"400",trigger:"click"}},[a("div",{staticClass:"guide-content"},[a("h3",[n._v("智能管家启动指南")]),n._l(n.guideSteps,function(u,N){return a("div",{key:N,staticClass:"guide-step"},[a("h4",[n._v(n._s(u.title))]),a("p",[n._v(n._s(u.content))]),u.command?a(se,{attrs:{value:u.command,readonly:"",size:"small"}},[a(ne,{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(_){return n.copyCommand(u.command)}},slot:"append"},[n._v("复制")])],1):n._e()],1)}),a(kt,{staticClass:"mt-4",attrs:{type:"info",closable:!1,"show-icon":""}},[a("template",{slot:"title"},[n._v("提示：修改配置后需要重启服务才能生效")])],2)],2),a(ne,{attrs:{slot:"reference",type:"primary",icon:"el-icon-question"},slot:"reference"},[n._v("使用指南")])],1)],1)])]),a(Rt,{staticClass:"config-tabs",model:{value:n.activeTab,callback:function(u){n.activeTab=u},expression:"activeTab"}},[a(xe,{attrs:{name:"basic"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fas fa-cogs"}),n._v(" 基础配置 ")]),a(Oe,{ref:"configForm",staticClass:"config-form",attrs:{model:n.config,"label-width":"120px"}},[a($t,{attrs:{accordion:""}},[a(de,{attrs:{title:"智能助手配置",name:"1"}},[a(F,{attrs:{label:"助手名称",rules:[{required:!0,message:"请输入智能助手名称",trigger:"blur"}]}},[a(se,{attrs:{placeholder:"例如：小美"},model:{value:n.config.bot.name,callback:function(u){n.$set(n.config.bot,"name",u)},expression:"config.bot.name"}})],1),a(F,{attrs:{label:"助手简介"}},[a(se,{attrs:{type:"textarea",rows:4,placeholder:"请描述智能助手的性格、特点等"},model:{value:n.config.bot.profile,callback:function(u){n.$set(n.config.bot,"profile",u)},expression:"config.bot.profile"}}),a("div",{staticClass:"form-tip"},[n._v("建议包含性别、性格、专长等特征")])],1)],1),a(de,{attrs:{title:"用户配置",name:"2"}},[a(F,{attrs:{label:"用户名称",rules:[{required:!0,message:"请输入用户名称",trigger:"blur"}]}},[a(se,{attrs:{placeholder:"您的称呼"},model:{value:n.config.master.name,callback:function(u){n.$set(n.config.master,"name",u)},expression:"config.master.name"}})],1),a(F,{attrs:{label:"用户简介"}},[a(se,{attrs:{type:"textarea",rows:4,placeholder:"请描述您的兴趣、习惯等"},model:{value:n.config.master.profile,callback:function(u){n.$set(n.config.master,"profile",u)},expression:"config.master.profile"}}),a("div",{staticClass:"form-tip"},[n._v("有助于智能助手更好地为您服务")])],1)],1),a(de,{attrs:{title:"账号设置",name:"3"}},[a(F,{attrs:{label:"小米ID",rules:[{required:!0,message:"请输入小米ID",trigger:"blur"}]}},[a(se,{model:{value:n.config.speaker.userId,callback:function(u){n.$set(n.config.speaker,"userId",u)},expression:"config.speaker.userId"}},[a("template",{slot:"append"},[a(ke,{attrs:{content:"请在小米账号的「个人信息」-「小米 ID」中查看",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2)],1),a(F,{attrs:{label:"账号密码",rules:[{required:!0,message:"请输入账号密码",trigger:"blur"}]}},[a(se,{attrs:{type:"password","show-password":""},model:{value:n.config.speaker.password,callback:function(u){n.$set(n.config.speaker,"password",u)},expression:"config.speaker.password"}})],1),a(F,{attrs:{label:"设备名称",rules:[{required:!0,message:"请输入设备名称",trigger:"blur"}]}},[a(se,{model:{value:n.config.speaker.did,callback:function(u){n.$set(n.config.speaker,"did",u)},expression:"config.speaker.did"}},[a("template",{slot:"append"},[a(ke,{attrs:{content:"小爱音箱 DID 或在米家中设置的名称",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2)],1)],1),a(de,{attrs:{title:"音箱配置",name:"4"}},[a(F,{attrs:{label:"音箱型号"}},[a(re,{attrs:{placeholder:"请选择音箱型号",filterable:"","allow-create":""},on:{change:n.handleDeviceModelChange},model:{value:n.selectedDeviceModel,callback:function(u){n.selectedDeviceModel=u},expression:"selectedDeviceModel"}},n._l(n.devicePresets,function(u,N){return a(ee,{key:N,attrs:{label:u.label,value:N}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加音箱型号")])],1),a(F,{attrs:{label:"播放命令",rules:[{required:!0,message:"请设置播放命令",trigger:"change",validator:(u,N,_)=>{!this.config.speaker.ttsCommand||this.config.speaker.ttsCommand.length===0?_(new n.Error("请设置播放命令")):this.config.speaker.ttsCommand.some(B=>B==null)?_(new n.Error("播放命令不能为空")):_()}}]}},[a("div",{staticClass:"command-group"},n._l(n.config.speaker.ttsCommand,function(u,N){return a(ce,{key:"tts-"+N,staticClass:"command-input",attrs:{min:0,max:10,step:1,controls:!0,size:"small","controls-position":"right"},model:{value:n.config.speaker.ttsCommand[N],callback:function(_){n.$set(n.config.speaker.ttsCommand,N,_)},expression:"config.speaker.ttsCommand[index]"}})}),1)]),a(F,{attrs:{label:"唤醒命令",rules:[{required:!0,message:"请设置唤醒命令",trigger:"change",validator:(u,N,_)=>{!this.config.speaker.wakeUpCommand||this.config.speaker.wakeUpCommand.length===0?_(new n.Error("请设置唤醒命令")):this.config.speaker.wakeUpCommand.some(B=>B==null)?_(new n.Error("唤醒命令不能为空")):_()}}]}},[a("div",{staticClass:"command-group"},n._l(n.config.speaker.wakeUpCommand,function(u,N){return a(ce,{key:"wake-"+N,staticClass:"command-input",attrs:{min:0,max:10,step:1,controls:!0,size:"small","controls-position":"right"},model:{value:n.config.speaker.wakeUpCommand[N],callback:function(_){n.$set(n.config.speaker.wakeUpCommand,N,_)},expression:"config.speaker.wakeUpCommand[index]"}})}),1)]),n.config.speaker.playingCommand.length>0?a(F,{attrs:{label:"播放检测命令"}},[a("div",{staticClass:"command-group"},n._l(n.config.speaker.playingCommand,function(u,N){return a(ce,{key:"play-"+N,staticClass:"command-input",attrs:{min:0,max:10,step:1,controls:!0,size:"small","controls-position":"right"},model:{value:n.config.speaker.playingCommand[N],callback:function(_){n.$set(n.config.speaker.playingCommand,N,_)},expression:"config.speaker.playingCommand[index]"}})}),1)]):n._e()],1),a(de,{attrs:{title:"高级设置",name:"6"}},[a(F,{staticClass:"keyword-select",attrs:{label:"调用AI键词"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择关键词"},model:{value:n.config.speaker.callAIKeywords,callback:function(u){n.$set(n.config.speaker,"callAIKeywords",u)},expression:"config.speaker.callAIKeywords"}},n._l(["请","你","智能助手"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"唤醒关键词"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择唤醒关键词"},model:{value:n.config.speaker.wakeUpKeywords,callback:function(u){n.$set(n.config.speaker,"wakeUpKeywords",u)},expression:"config.speaker.wakeUpKeywords"}},n._l(["打开","进入","激活"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"退出关键词"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择退出关键词"},model:{value:n.config.speaker.exitKeywords,callback:function(u){n.$set(n.config.speaker,"exitKeywords",u)},expression:"config.speaker.exitKeywords"}},n._l(["关闭","退出","再见"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"进入提示语"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择入提示语"},model:{value:n.config.speaker.onEnterAI,callback:function(u){n.$set(n.config.speaker,"onEnterAI",u)},expression:"config.speaker.onEnterAI"}},n._l(["您好，我是您的智能助手"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"退出提示语"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择退出提示语"},model:{value:n.config.speaker.onExitAI,callback:function(u){n.$set(n.config.speaker,"onExitAI",u)},expression:"config.speaker.onExitAI"}},n._l(["再见，期待下次为您服务"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"AI思考提示语"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择AI思考提示语"},model:{value:n.config.speaker.onAIAsking,callback:function(u){n.$set(n.config.speaker,"onAIAsking",u)},expression:"config.speaker.onAIAsking"}},n._l(["让我思考一下"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"AI回答提示语"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择AI回答提示语"},model:{value:n.config.speaker.onAIReplied,callback:function(u){n.$set(n.config.speaker,"onAIReplied",u)},expression:"config.speaker.onAIReplied"}},n._l(["我的回答是"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a(F,{staticClass:"keyword-select",attrs:{label:"AI错误提示语"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择AI错误提示语"},model:{value:n.config.speaker.onAIError,callback:function(u){n.$set(n.config.speaker,"onAIError",u)},expression:"config.speaker.onAIError"}},n._l(["抱歉，我遇到了一些问题"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1),a("div",{staticClass:"continuous-dialog-settings"},[a(F,{attrs:{label:"连续对话"}},[a(we,{model:{value:n.config.speaker.streamResponse,callback:function(u){n.$set(n.config.speaker,"streamResponse",u)},expression:"config.speaker.streamResponse"}}),a("div",{staticClass:"form-tip"},[n._v("启用后持连续对话功能")])],1),a(Re,{attrs:{gutter:20}},[a(fe,{attrs:{span:12}},[a(F,{attrs:{label:"自动退出时间"}},[a(ce,{attrs:{min:1,max:60,step:1,"controls-position":"right"},model:{value:n.config.speaker.exitKeepAliveAfter,callback:function(u){n.$set(n.config.speaker,"exitKeepAliveAfter",u)},expression:"config.speaker.exitKeepAliveAfter"}}),a("div",{staticClass:"form-tip"},[n._v("无响应自动退出（秒）")])],1)],1),a(fe,{attrs:{span:12}},[a(F,{attrs:{label:"检测延迟"}},[a(ce,{attrs:{min:1,max:10,step:1,"controls-position":"right"},model:{value:n.config.speaker.checkTTSStatusAfter,callback:function(u){n.$set(n.config.speaker,"checkTTSStatusAfter",u)},expression:"config.speaker.checkTTSStatusAfter"}}),a("div",{staticClass:"form-tip"},[n._v("开始检测延迟（秒）")])],1)],1)],1),a(Re,{attrs:{gutter:20}},[a(fe,{attrs:{span:12}},[a(F,{attrs:{label:"检测间隔"}},[a(ce,{attrs:{min:500,max:5e3,step:100,"controls-position":"right"},model:{value:n.config.speaker.checkInterval,callback:function(u){n.$set(n.config.speaker,"checkInterval",u)},expression:"config.speaker.checkInterval"}}),a("div",{staticClass:"form-tip"},[n._v("播放态检测间隔（毫秒）")])],1)],1),a(fe,{attrs:{span:12}},[a(F,{attrs:{label:"请求超时"}},[a(ce,{attrs:{min:1e3,max:3e4,step:1e3,"controls-position":"right"},model:{value:n.config.speaker.timeout,callback:function(u){n.$set(n.config.speaker,"timeout",u)},expression:"config.speaker.timeout"}}),a("div",{staticClass:"form-tip"},[n._v("网络请求超时（毫秒）")])],1)],1)],1),a(Re,{attrs:{gutter:20}},[a(fe,{attrs:{span:12}},[a(F,{attrs:{label:"调试模式"}},[a(we,{model:{value:n.config.speaker.debug,callback:function(u){n.$set(n.config.speaker,"debug",u)},expression:"config.speaker.debug"}}),a("div",{staticClass:"form-tip"},[n._v("启用调试日志输出")])],1)],1),a(fe,{attrs:{span:12}},[a(F,{attrs:{label:"跟踪日志"}},[a(we,{model:{value:n.config.speaker.enableTrace,callback:function(u){n.$set(n.config.speaker,"enableTrace",u)},expression:"config.speaker.enableTrace"}}),a("div",{staticClass:"form-tip"},[n._v("跟踪 Mi Service 日志")])],1)],1)],1)],1)],1),a(de,{attrs:{title:"语音配置",name:"5"}},[a(F,{attrs:{label:"TTS 引擎"}},[a(re,{attrs:{placeholder:"请选择 TTS 引擎"},on:{change:n.handleTTSEngineChange},model:{value:n.selectedTTSEngine,callback:function(u){n.selectedTTSEngine=u},expression:"selectedTTSEngine"}},[n._l(n.ttsEngines,function(u,N){return a(ee,{key:N,attrs:{label:u.label,value:N}},[a("span",{staticClass:"engine-tooltip"},[n._v(n._s(u.tooltip))]),u.isDefault?n._e():a("span",{staticClass:"engine-actions"},[a(ne,{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(_){return _.stopPropagation(),n.removeTTSEngine(N)}}})],1)])}),a(ee,{attrs:{value:"add_new",label:"+ 添加自定义引擎"}})],2),a("div",{staticClass:"form-tip"},[n._v("语音合成引擎选择")])],1),n.selectedTTSEngine&&((f=n.ttsEngines[n.selectedTTSEngine])==null?void 0:f.value)==="custom"?[a(F,{attrs:{label:"服务地址"}},[a(se,{attrs:{placeholder:"请输入 TTS 服务地址"},model:{value:n.config.tts.baseUrl,callback:function(u){n.$set(n.config.tts,"baseUrl",u)},expression:"config.tts.baseUrl"}},[a("template",{slot:"append"},[a(ke,{attrs:{content:"TTS 服务的接口地址",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],2)],1)]:n._e(),n.selectedTTSEngine&&((b=n.ttsEngines[n.selectedTTSEngine])==null?void 0:b.value)==="custom"?[a(F,{attrs:{label:"音色切换关键词"}},[a(re,{attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"请输入或选择音色切换关键词"},model:{value:n.config.speaker.switchSpeakerKeywords,callback:function(u){n.$set(n.config.speaker,"switchSpeakerKeywords",u)},expression:"config.speaker.switchSpeakerKeywords"}},n._l(["把声音换成","切换声音为","使用音色"],function(u){return a(ee,{key:u,attrs:{label:u,value:u}})}),1),a("div",{staticClass:"form-tip"},[n._v(" 支持自定义添加，按回车确认。使用方式：关键词 + 色名称 ")])],1)]:n._e(),n.selectedTTSEngine&&(($=n.ttsEngines[n.selectedTTSEngine])==null?void 0:$.value)==="custom"?[a(F,{attrs:{label:"可用音色"}},[a(Jt,{staticStyle:{width:"100%"},attrs:{data:n.ttsEngines[n.selectedTTSEngine].speakers,size:"small"}},[a(Ke,{attrs:{prop:"label",label:"音色名称",width:"180"}}),a(Ke,{attrs:{prop:"value",label:"音色ID"}})],1)],1)]:n._e()],2)],1)],1)],1),a(xe,{attrs:{name:"ai"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fas fa-robot"}),n._v(" AI服务配置 ")]),a(Oe,{ref:"aiForm",staticClass:"config-form",attrs:{model:n.config,"label-width":"120px"}},[a(F,{attrs:{label:"选择 AI 服务"}},[a(re,{attrs:{placeholder:"请选择 AI 服务",filterable:"","allow-create":""},on:{change:n.handleAIServiceChange},model:{value:n.selectedAIService,callback:function(u){n.selectedAIService=u},expression:"selectedAIService"}},[n._l(n.aiServices,function(u,N){return a(ee,{key:N,attrs:{label:u.label,value:N}})}),a(ee,{attrs:{label:"自定义 AI 服务",value:"custom"}})],2),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加按回车确认")])],1),n.selectedAIService?[a(F,{staticClass:"endpoint-item",attrs:{label:"接口地址",rules:[{required:!0,message:"请输入接口地址",trigger:"blur"}]}},[a(re,{attrs:{placeholder:"请选择或输入接口地址",filterable:"","allow-create":""},on:{change:n.handleEndpointChange},model:{value:n.config[n.selectedAIService].endpoint,callback:function(u){n.$set(n.config[n.selectedAIService],"endpoint",u)},expression:"config[selectedAIService].endpoint"}},[n.selectedAIService!=="custom"&&n.aiServices[n.selectedAIService]?a(ee,{attrs:{label:(L=n.aiServices[n.selectedAIService])==null?void 0:L.endpoint,value:(V=n.aiServices[n.selectedAIService])==null?void 0:V.endpoint}},[a("span",{staticClass:"endpoint-option"},[n._v(n._s((X=n.aiServices[n.selectedAIService])==null?void 0:X.endpoint))])]):n._e()],1),a("div",{staticClass:"form-tip"},[n._v(" "+n._s(n.aiServices[n.selectedAIService]&&n.aiServices[n.selectedAIService].tooltip||"请输入完整的接口地址")+" ")])],1),a(F,{attrs:{label:"API 密钥",rules:[{required:!0,message:"请输入 API 密钥",trigger:"blur"}]}},[a(se,{attrs:{type:"password","show-password":"",placeholder:"请输入 API 密钥"},model:{value:n.config[n.selectedAIService].apiKey,callback:function(u){n.$set(n.config[n.selectedAIService],"apiKey",u)},expression:"config[selectedAIService].apiKey"}})],1),a(F,{attrs:{label:"模型",rules:[{required:!0,message:"请选择或输入模型",trigger:"change"}]}},[a(re,{attrs:{placeholder:"请选择或输入模型",filterable:"","allow-create":""},model:{value:n.config[n.selectedAIService].model,callback:function(u){n.$set(n.config[n.selectedAIService],"model",u)},expression:"config[selectedAIService].model"}},n._l((G=n.aiServices[n.selectedAIService])==null?void 0:G.models,function(u){return a(ee,{key:u.value,attrs:{label:u.label,value:u.value}})}),1),a("div",{staticClass:"form-tip"},[n._v("支持自定义添加，按回车确认")])],1)]:n._e()],2)],1),a(xe,{attrs:{name:"prompt"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fas fa-file-alt"}),n._v(" Prompt模板 ")]),a(Oe,{ref:"promptForm",staticClass:"config-form",attrs:{model:n.config,"label-width":"120px"}},[a(F,{attrs:{label:""}},[a("div",{staticClass:"prompt-editor"},[a("div",{staticClass:"editor-header"},[a("div",{staticClass:"header-actions"},[a(we,{staticClass:"mode-switch",attrs:{"active-text":"预览模式","inactive-text":"编辑模式"},model:{value:n.isPreviewMode,callback:function(u){n.isPreviewMode=u},expression:"isPreviewMode"}}),a("div",{staticClass:"header-buttons"},[a(Le,{attrs:{placement:"bottom",width:"400",trigger:"click","popper-class":"variable-guide-popover"}},[a("div",{staticClass:"guide-content"},[a("h3",[n._v("可用的变量")]),a("div",{staticClass:"variable-list"},n._l(n.variableTableData,function(u,N){return a("div",{key:N,staticClass:"guide-section"},[a("div",{staticClass:"variable-header"},[a("code",[n._v(n._s(u.variable))]),a(ne,{staticClass:"copy-btn",attrs:{type:"text",icon:"el-icon-document-copy"},on:{click:function(_){return n.copyVariable(u.variable)}}},[n._v("复制")])],1),a("p",{staticClass:"variable-desc"},[n._v(" "+n._s(u.description)+" ")]),u.currentValue?a("p",{staticClass:"variable-value"},[n._v(" 当前值: "+n._s(u.currentValue)+" ")]):n._e()])}),0)]),a(ne,{attrs:{slot:"reference",type:"text",icon:"el-icon-info"},slot:"reference"},[n._v("查看可用变量")])],1),a(ne,{attrs:{type:"text",icon:"el-icon-refresh-left"},on:{click:n.resetSystemTemplate}},[n._v("恢复默认模板")])],1)],1)]),a("div",{staticClass:"editor-container"},[a(se,{directives:[{name:"show",rawName:"v-show",value:!n.isPreviewMode,expression:"!isPreviewMode"}],staticClass:"custom-textarea",attrs:{type:"textarea",rows:20,autosize:{minRows:10,maxRows:30},placeholder:"请输入系统 Prompt 模板"},model:{value:n.config.systemTemplate,callback:function(u){n.$set(n.config,"systemTemplate",u)},expression:"config.systemTemplate"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:n.isPreviewMode,expression:"isPreviewMode"}],staticClass:"preview-content custom-scrollbar",domProps:{innerHTML:n._s(n.getPreviewContent())}})],1)])])],1)],1),a(xe,{attrs:{name:"json"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fas fa-code"}),n._v(" JSON编辑器 ")]),a("div",{staticClass:"editor-header"},[a("div",[a(ne,{attrs:{type:"primary",size:"small"},on:{click:n.loadExampleConfig}},[n._v(" 加载示例配置 ")]),a(ne,{attrs:{type:"warning",size:"small"},on:{click:n.syncFormToJson}},[n._v(" 表单同步到JSON ")]),a(ne,{attrs:{type:"success",size:"small"},on:{click:n.syncJsonToForm}},[n._v(" JSON同步到表单 ")])],1)]),a(se,{staticClass:"config-editor",attrs:{type:"textarea",rows:20},model:{value:n.configContent,callback:function(u){n.configContent=u},expression:"configContent"}})],1)],1),a("div",{staticClass:"form-actions"},[a(ne,{attrs:{type:"primary"},on:{click:n.saveConfig}},[n._v(" 保存配置 ")])],1)],1)],1)},ir=[],ar=Vt(rr,nr,ir,!1,null,null,null,null);const or=ar.exports;export{or as default};
